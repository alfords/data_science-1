


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cs110 - Text Analysis and Entity Resolution with TF-IDF</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome-4.7.0/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="up" title="EdX - Data Science and Engineering with Spark" href="top-edx.html" />
    <link rel="next" title="cs120 Lab - Math_review" href="cs120_lab1a.html" />
    <link rel="prev" title="cs110 - Predicting Movie Ratings with Alternating Least Squares" href="cs110_lab2.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Data Science</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://takwatanabe.me"><i class="fa fa-home" aria-hidden="true"></i>&nbsp; takwatanabe.me</a></li>
                <li><a href="https://github.com/wtak23/data_science"><i class="fa fa-github" aria-hidden="true"></i>&nbsp; Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">TOC <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Research Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pytak.html"><code class="docutils literal"><span class="pre">pytak</span></code> &#8212; my personal python package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../supervised_nmf.html">Supervised NMF (<code class="docutils literal"><span class="pre">supervised_nmf</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../supervised_nmf.html#non-negative-matrix-factorization">Non-negative Matrix Factorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../supervised_nmf.html#nmf-ls-pnmf-admm">nmf.ls_pnmf_admm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../supervised_nmf.html#nmf-ls-sgpnmf-admm">nmf.LS_SGPNMF_ADMM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../supervised_nmf.html#visualization">Visualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../supervised_nmf.html#imconnmat">imconnmat</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../supervised_nmf.html#data-io">Data IO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../supervised_nmf.html#data-tob-pnc-load-bct-measures">data.tob_pnc.load_bct_measures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../supervised_nmf.html#data-tob-pnc-load-diffusion-volume-matfile">data.tob_pnc.load_diffusion_volume_matfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../supervised_nmf.html#data-tob-pnc-load-connectome-matfile">data.tob_pnc.load_connectome_matfile</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sqlite-whirlwind.html">A whirlwind tour to sqlite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#beginning">Beginning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#insert-data">Insert data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#get-data">Get data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#row-factory">Row factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#iterdump">iterdump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#cursor-object">Cursor object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqlite-whirlwind.html#row-objects">Row objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../spark-config.html">Spark Configuration Setup for Jupyter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../spark-config.html#about">about</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-config.html#self-contained-applications">self-contained applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-config.html#note">Note</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pnc-mean-analysis.html">Brain Connectivity - PNC Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#load-relevant-packages">Load relevant packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#load-clinical-scores-dataframe">Load clinical-scores (DataFrame)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#handle-nan-values">Handle nan values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#create-histogram-of-numeric-scores">Create histogram of numeric scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#display-mean-connectome-heatmap">Display mean connectome heatmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#nice-let-s-repeat-using-plotly">Nice, let&#8217;s repeat using plotly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#create-plotly-trace-object">Create plotly <code class="docutils literal"><span class="pre">trace</span></code> object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#bunch-of-layout-objects">Bunch of layout objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#nice-but-we-can-do-better-by-defining-a-layout-object">Nice, but we can do better by defining a <code class="docutils literal"><span class="pre">layout</span></code> object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-mean-analysis.html#try-again">Try again</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html">PNC classification experiment results (old)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#what-is-this">What is this?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#load-data">Load data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#show-classification-result">Show classification result</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#display-median-coefficients">Display median coefficients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#display-median-connmat">Display median connmat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#glass-brain">Glass-brain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#thresholded-median-value-experimental">Thresholded median value (experimental)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#trinarized-median-connmat-after-thresholding">Trinarized median connmat after thresholding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc_study_feature_1104_onesession.html#glassbrain">Glassbrain</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rst-test/top-rst.html">Check rst functionality (<code class="docutils literal"><span class="pre">top-rst.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html">Test runs on RST directives (<code class="docutils literal"><span class="pre">cs-rst.directive-test.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#admonitions">Admonitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#images">Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#image">Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#figure">figure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#additional-body-elements">Additional body elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#id1">contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#container">container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#rubric">rubric</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#topics">topics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#sidebar">sidebar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#parsed-literal">parsed-literal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#epigraph">epigraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#highlights">highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#pull-quote">pull-quote</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#compound">compound</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#special-tables">Special tables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#table">table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#csv-table">csv-table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#list-table">list-table</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#special-directives">Special directives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#raw">raw</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#include">include</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#html-specifics">HTML specifics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#meta">meta</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#title">title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#influencing-markup-i-rarely-use">Influencing Markup (i rarely use)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#default-role-set-a-new-default-role">default-role (set a new default role)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#role-create-a-new-role">role (create a new role)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#foot-notes-citations-substitutions">Foot-notes, citations, substitutions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#footnotes">footnotes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#citations">citations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.directive-test.html#substitutions">substitutions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html">Latex mathematics on sphinx (<code class="docutils literal"><span class="pre">cs-rst.math_part1.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#symbols">Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#greek-letters">Greek letters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#operators">Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#fractions-and-binomials">Fractions and Binomials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#square-roots">Square roots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#sum-and-integrals">Sum and integrals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#big-commands"><strong>BIG</strong> commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#brackets-braces-and-delimiters">Brackets, braces and delimiters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#automatic-sizing">Automatic sizing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#manual-sizing">Manual sizing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#typesetting-intervals">Typesetting intervals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#matrices-and-array">Matrices and array</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#more-fancy-ones">More fancy ones</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#adding-text-to-equations">Adding text to equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#formatting-mathematics-symbols">Formatting mathematics symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#accents">Accents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#color-works">Color (works!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#plus-and-minus">Plus and minus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#controlling-horizontal-spacing">Controlling horizontal spacing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#dots">Dots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#list-of-mathematical-symbols">List of Mathematical Symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#other-symbols">Other symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs-rst.math_part1.html#trigonemtrics">Trigonemtrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html">Advanced Latex Mathematics on Sphinx (<code class="docutils literal"><span class="pre">cs_rst.math_part2.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#some-self-notes-i-created">Some self-notes I created</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#bold-for-lower-case-greek">bold for lower-case greek</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#defining-own-function">Defining own function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#equations">Equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#vertical-alignment">Vertical alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#more-aligns">More aligns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#braces-spanning-multiple-lines">Braces spanning multiple lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#aligning-braces-for-piecewise-functions">Aligning braces for piecewise functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#the-cases-environment">The <strong>cases</strong> environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#more-exotic-examples">More exotic examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#boxed-equations">Boxed equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#custom-operator-ah-argmax">Custom operator (ah, argmax!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#advanced-formatting">Advanced formatting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#limits">Limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#subscripts-and-supterscripts">Subscripts and supterscripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rst-test/cs_rst.math_part2.html#changing-font-size">Changing font size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rst-test/cs-rst.ipython.html">Demo runs of ipython sphinx extensions (<code class="docutils literal"><span class="pre">cs-rst.ipython.rst</span></code>)</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Spark Notes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="top-edx.html">EdX - Data Science and Engineering with Spark</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cs105_lab0.html">cs105_lab0 - Running Your First Notebook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab0.html#create-dataframe-and-filter-it">Create DataFrame and filter it</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab0.html#load-a-text-file">Load a text file</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab0.html#check-plotting">Check plotting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs105_lab1a.html">cs105_lab1a - Learning Apache Spark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a.html#spark-context">Spark Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a.html#sparkcontext-and-the-driver-program-cluster-structure">SparkContext and the Driver Program (Cluster Structure)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#about-the-driver-program">About the Driver Program</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#about-hivecontext-the-type-of-sqlcontext-for-db">About HiveContext (the type of sqlContext for DB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#sparkcontext">SparkContext</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a.html#using-dataframes-and-chaining-transformations">Using DataFrames and chaining transformations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#dataframe-and-schema">DataFrame and Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#ways-to-define-schemas">Ways to define schemas</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#distributed-data-and-using-a-collection-to-create-a-dataframe">Distributed Data and using a collection to create a DataFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a.html#query-plans-and-the-catalyst-optimizer">Query plans and the <code class="docutils literal"><span class="pre">Catalyst</span> <span class="pre">Optimizer</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs105_lab1a_coding.html">cs105_lab1a codes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#exercise-overview">Exercise Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#create-list-of-data">Create list of Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#create-dataframe-from-a-list">Create DataFrame from a list</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#subtract-one-from-each-the-age-row">Subtract one from each the <em>age</em> row</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#apply-transformations-and-examine-query-plan">Apply transformations, and examine query plan</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#use-collect-to-view-results">Use <code class="docutils literal"><span class="pre">collect</span></code> to view results</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#display-helper-function-in-db">display helper function in DB</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#more-actions-count-to-get-total">More actions: <code class="docutils literal"><span class="pre">count</span></code> to get total</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#apply-transformation-filter-and-view-results-with-collect">Apply transformation <code class="docutils literal"><span class="pre">filter</span></code> and view results with <code class="docutils literal"><span class="pre">collect</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#lambda-functions-and-udfs">Lambda functions and UDFs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#additional-dataframe-actions">Additional DataFrame actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#additional-dataframe-transformations">Additional DataFrame transformations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#orderby">orderBy</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#a-distinct-and-dropduplicates">A <code class="docutils literal"><span class="pre">distinct</span></code> and <code class="docutils literal"><span class="pre">dropDuplicates</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#drop">drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#groupby">groupBy</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#sample">sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#caching-dataframes-and-storage-options">Caching DataFrames and Storage Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#unpersist-and-storage-options">Unpersist and storage options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1a_coding.html#debugging-spark-applications-and-lazy-evaluation">Debugging Spark applications and lazy evaluation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#jvm-and-py4j-how-python-is-executed-in-spark">JVM and Py4J - How Python is Executed in Spark</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#challenges-with-lazy-evaluation-using-transformations-and-actions">Challenges with lazy evaluation using transformations and actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#finding-the-bug">Finding the bug</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1a_coding.html#moving-toward-expert-style">Moving toward expert style</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs105_lab1b.html">cs105_lab1b - Building a word count application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1b.html#create-a-base-df-and-perform-operations">Create a base DF and perform operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#create-a-base-df">Create a base DF</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#use-df-functions-to-add-an-s">Use DF functions to add an &#8216;s&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#length-of-each-word">Length of each word</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1b.html#counting-with-spark-sql-and-dataframes">Counting with Spark SQL and DataFrames</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#using-groupby-and-count">Using groupBy and count</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1b.html#finding-unique-words-and-a-mean-value">Finding unique words and a mean value</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#unique-words">Unique words</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#means-of-groups-using-dataframes">Means of groups using DataFrames</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1b.html#apply-word-count-to-a-file">Apply word count to a file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#the-wordcount-function">The wordCount function</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#capitalization-and-punctuation">Capitalization and punctuation</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#load-a-text-file">Load a text file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#words-from-lines">Words from lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab1b.html#count-the-words">Count the words</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab1b.html#random-stuffs-i-played-around-with">Random stuffs I played around with</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs105_lab2.html">cs105_lab2 - Web Server Log Analysis with Apache Spark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab2.html#part1-overview-web-server-log-analysis-with-apache-spark">Part1: Overview: Web Server Log Analysis with Apache Spark</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#modules-used-in-this-assignment">Modules used in this assignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#dataset-used">Dataset used</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab2.html#part2-exploratory-data-analysis">Part2: Exploratory Data Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#a-loading-the-log-file">2a) loading the log file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#b-parsing-the-log-file">2b) Parsing the log file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#c-data-cleaning">2c) Data Cleaning</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#fix-the-rows-with-null-content-size">Fix the rows with null content_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#parsing-the-timestamp">Parsing the timestamp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab2.html#part3-analysis-walk-through-on-the-web-server-log-file">Part3: Analysis Walk-Through on the Web Server Log File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#a-example-content-size-statistics">3a) Example: Content Size Statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#b-example-http-status-analysis">3b) Example: HTTP Status Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#c-example-status-graphing">3c) Example: Status Graphing</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#d-example-frequent-hosts">3d) Example: Frequent Hosts</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#e-example-visualizing-paths">3e) Example: Visualizing Paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#f-example-top-paths">3f) Example: Top Paths</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs105_lab2.html#part-4-analyzing-web-server-log-file">Part 4: Analyzing Web Server Log File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#a-exercise-top-ten-error-paths-hw">4a) Exercise: Top Ten Error Paths (HW)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#b-exercise-number-of-unique-hosts-hw">4b) Exercise: Number of Unique Hosts (HW)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#c-exercise-number-of-unique-daily-hosts">4c) Exercise: Number of Unique Daily Hosts</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#d-exercise-visualizing-the-number-of-unique-daily-hosts">4d) Exercise: Visualizing the Number of Unique Daily Hosts</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#e-exercise-average-number-of-daily-requests-per-host">4e) Exercise: Average Number of Daily Requests per Host</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs105_lab2.html#f-exercise-visualizing-the-average-daily-requests-per-unique-host">4f) Exercise: Visualizing the Average Daily Requests per Unique Host</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs110_lab1.html">cs110 - Power Plant Machine Learning Pipeline Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part1-business-understanding">Part1: Business Understanding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#background-power-generation">Background &#8212; power generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#challenge-for-power-grid-operation">Challenge for power grid operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#the-business-problem">The business problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#business-understanding">Business Understanding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part2-extract-transform-load-etl-your-data">Part2: Extract-Transform-Load (ETL) Your Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-2a">Exercise 2a</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-2b">Exercise 2b</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part-2-alternative-method-to-load-your-data">Part 2: Alternative Method to Load your Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-2c">Exercise 2c</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-2d">Exercise 2d</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part-3-explore-your-data">Part 3: Explore Your Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#a-register-the-dataframe-to-use-sql-commands">3a - <strong>register</strong> the DataFrame (to use sql commands)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#b-read-data-using-sql-command-databricks-only">3b - read data using <code class="docutils literal"><span class="pre">%sql</span></code> command (DataBricks only)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#c-use-sql-desc-command-to-describe-the-schema">3c - use SQL <code class="docutils literal"><span class="pre">desc</span></code> command to describe the schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#dataframe-describe-method">DataFrame <code class="docutils literal"><span class="pre">describe</span></code> method</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part-4-visualize-your-data">Part 4: Visualize your data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-4a">Exercise 4a</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-4b-hw">Exercise 4b (hw)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-4c-hw">Exercise 4c (hw)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-4d-hw">Exercise 4d (hw)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part-5-data-preparation">Part 5: Data Preparation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-5-a">Exercise 5(a)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part-6-data-modeling">Part 6: Data Modeling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-6-a-hw">Exercise 6(a) (hw)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#b-build-linear-regression-model">6(b) - build Linear Regression Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#c-set-model-parameters-and-fit-linear-regression-model">6(c) - set model parameters, and fit linear regression model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#d-study-the-fitted-lr-model">6(d) &#8212; study the fitted LR model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#e-evalute-model-on-the-20-test-set">6(e) evalute model on the 20% test-set</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#f-quantify-performance-using-regressionevaluator">6(f) &#8211; quantify performance using <code class="docutils literal"><span class="pre">RegressionEvaluator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#g-use-r2-this-time">6(g) use R2 this time</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#h-register-our-test-dataframe-as-sql-table">6(h) Register our test DataFrame as SQL table</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#i-sql-statement-on-the-sql-table-registered-from-our-test-dataframe">6(i) SQL statement on the SQL table registered from our test DataFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#j-plot-histogram-of-rmse">6(j) Plot histogram of RMSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#k-plot-pie-chart">6(k) Plot pie chart</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab1.html#part-7-tuning-and-evaluation">Part 7: Tuning and Evaluation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#a-run-cross-validation-tuning">7(a) Run Cross Validation Tuning</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-b-evaluate-tuned-lr-model-hw">Exercise 7(b) &#8211; Evaluate tuned LR model (hw)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-c-decisiontreeregressor">Exercise 7(c) DecisionTreeRegressor</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-d">Exercise 7(d)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-e-evaluate-dtr-performance">Exercise 7(e) &#8212; evaluate DTR performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-f-random-forest-regressor">Exercise 7(f) (Random Forest Regressor)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-g-cross-validation">Exercise 7(g) (cross validation)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab1.html#exercise-7-h-model-evaluation">Exercise 7(h) (model evaluation)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs110_lab2.html">cs110 - Predicting Movie Ratings with Alternating Least Squares</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab2.html#preliminaries">Preliminaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#the-20-million-movie-sample">The 20-million movie sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#cpu-vs-io-tradeoff">CPU vs IO Tradeoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#load-and-cache">Load and Cache</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab2.html#basic-recommendations">Basic Recommendations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-1a-movies-with-highest-average-ratings">Exercise (1a) Movies with Highest Average Ratings</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-1b-movies-with-highest-average-ratings-and-at-least-500-reviews">Exercise (1b) Movies with Highest Average Ratings and at least 500 reviews</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab2.html#collaborative-filtering">Collaborative Filtering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-2a-creating-a-training-set">Exercise (2a) Creating a Training Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-2b-alternating-least-squares">Exercise (2b) Alternating Least Squares</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#why-are-we-doing-our-own-cross-validation">Why are we doing our own cross-validation?</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#excersie-2c-testing-your-model">Excersie (2c) Testing Your Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-2d-comparing-your-model">Exercise (2d) Comparing Your Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs110_lab2.html#predictions-for-yourself">Predictions for Yourself</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-3a-your-movie-ratings">Exercise (3a) Your Movie Ratings</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-3b-add-your-movies-to-training-dataset">Exercise (3b) Add Your Movies to Training Dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-3c-train-a-model-with-your-ratings">Exercise (3c) Train a Model with Your Ratings</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-3d-check-rmse-for-the-new-model-with-your-ratings">Exercise (3d) Check RMSE for the New Model with Your Ratings</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-3e-predict-your-ratings">Exercise (3e) Predict Your Ratings</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs110_lab2.html#exercise-3f-predict-your-ratings">Exercise (3f) Predict Your Ratings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">cs110 - Text Analysis and Entity Resolution with TF-IDF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preliminaries">Preliminaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#background-on-er">Background on ER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-files">Data files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#load-data-files">Load data files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examine-the-lines-loaded">Examine the lines loaded</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#part1-er-as-text-similarity-bags-of-words">Part1: ER as Text Similarity - Bags of Words</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-tokenize-a-string">1a) Tokenize a String</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b-removing-stopwords">1b) removing stopwords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-tokenizing-the-small-datasets">1c) Tokenizing the small datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-amazon-record-with-the-most-tokens">1d) Amazon record with the most tokens</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#part2-er-as-text-similarity-weighted-bag-of-words-using-tf-idf">Part2: ER as Text Similarity - Weighted Bag-of-Words using TF-IDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-implement-a-tf-function">2a) Implement a TF function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b-create-a-corpus">2b) Create a corpus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-implement-an-idfs-function">2c) Implement an IDFs function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-tokens-with-the-smallest-idf">2d) Tokens with the smallest IDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#e-idf-histogram">2e) IDF Histogram</a></li>
<li class="toctree-l4"><a class="reference internal" href="#f-implement-a-tf-idf-function">2f) Implement a TF-IDF function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#part-3-er-as-text-similarity-cosine-similarity">Part 3: ER as Text Similarity &#8212; Cosine Similarity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-implement-the-components-of-a-cosinesimilarity-function">3a) Implement the components of a cosineSimilarity function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b-implement-a-cosinesimilarity-function">3b) Implement a cosineSimilarity function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-perform-entity-resolution">3c) Perform Entity Resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-perform-entity-resolution-with-broadcast-variables">3d) Perform Entity Resolution with Broadcast Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#e-perform-a-gold-standard-evaluation">3e) Perform a Gold Standard evaluation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-gold-standard-data-we-can-answer-the-following-questions">Using the &#8220;gold standard&#8221; data we can answer the following questions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#part-4-scalable-er">Part 4: Scalable ER</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inverted-indices">Inverted Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-tokenize-the-full-dataset">4a) Tokenize the full dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b-compute-idfs-and-tf-idfs-for-the-full-datasets">4b) Compute IDFs and TF-IDFs for the full datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-compute-norms-for-the-weights-from-the-full-datasets">4c) Compute Norms for the weights from the full datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-create-inverted-indices-from-the-full-datasets">4d) Create inverted indices from the full datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#e-identify-common-tokens-from-the-full-dataset">4e) Identify common tokens from the full dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#f-identify-common-tokens-from-the-full-dataset">4f) Identify common tokens from the full dataset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#part-5-analysis">Part 5: Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-counting-true-positives-false-positives-and-false-negatives">5a) Counting True Positives, False Positives, and False Negatives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b-precision-recall-and-f-measures">5b Precision, Recall, and F-measures</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-line-plots">5c Line Plots</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#discussion-of-results">Discussion of results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs120_lab1a.html">cs120 Lab - Math_review</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1a.html#math-review">Math review</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-1a-scalar-multiplication-vectors">Exercise (1a) Scalar multiplication: vectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-1b-element-wise-multiplication-vectors">Exercise (1b) Element-wise multiplication: vectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-1c-dot-product">Exercise (1c) Dot product</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-1d-matrix-multiplication">Exercise (1d) Matrix multiplication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1a.html#numpy">NumPy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-2a-scalar-multiplication">Exercise (2a) Scalar multiplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-2b-element-wise-multiplication-and-dot-product">Exercise (2b) Element-wise multiplication and dot product</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-2c-matrix-math">Exercise (2c) Matrix math</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1a.html#additional-numpy-and-spark-linear-algebra">Additional NumPy and Spark linear algebra</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-3a-slices">Exercise (3a) Slices</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-3b-combining-ndarray-objects">Exercise (3b) Combining ndarray objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-3c-pyspark-s-densevector">Exercise (3c) PySpark&#8217;s DenseVector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1a.html#python-lambda-expressions">Python lambda expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-4a-lambda-is-an-anonymous-function">Exercise (4a) Lambda is an anonymous function</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-4b-lambda-fewer-steps-than-def">Exercise (4b) lambda fewer steps than def</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-4c-lambda-expression-arguments">Exercise (4c) Lambda expression arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-4d-restrictions-on-lambda-expressions">Exercise (4d) Restrictions on lambda expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-4e-functional-programming">Exercise (4e) Functional programming</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1a.html#exercise-4f-composability">Exercise (4f) Composability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs120_lab1b.html">cs120 - Word Count Lab in RDD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1b.html#part-1-creating-a-base-rdd-and-pair-rdds">Part 1: Creating a base RDD and pair RDDs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#b-pluralize-and-test">1b) Pluralize and test</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#c-apply-makeplural-to-the-base-rdd">1c) Apply makePlural to the base RDD</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#d-pass-a-lambda-function-to-map">1d) Pass a lambda function to map</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#e-length-of-each-word">1e) Length of each word</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#f-pair-rdds">1f) Pair RDDs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1b.html#part-2-counting-with-pair-rdds">Part 2: Counting with pair RDDs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#a-groupbykey-approach">2a) <code class="docutils literal"><span class="pre">groupByKey()</span></code> approach</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#b-use-groupbykey-to-obtain-the-counts">2b) Use <code class="docutils literal"><span class="pre">groupByKey()</span></code> to obtain the counts</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#c-counting-using-reducebykey">2c) Counting using <code class="docutils literal"><span class="pre">reduceByKey</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#d-all-together">2d) All together</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1b.html#part-3-finding-unique-words-and-a-mean-value">Part 3: Finding unique words and a mean value</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#a-unique-words">3a) Unique words</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#b-mean-using-reduce">3b) Mean using <code class="docutils literal"><span class="pre">reduce</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab1b.html#part-4-apply-word-count-to-a-file">Part 4: Apply word count to a file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#a-wordcount-function">4a) <code class="docutils literal"><span class="pre">wordCount</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#b-capitalization-and-punctuation">4b) Capitalization and punctuation</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#c-load-a-text-file">4c) Load a text file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#d-words-from-lines">4d) Words from lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#e-remove-empty-elements">4e) Remove empty elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab1b.html#f-count-the-words">4f) Count the words</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs120_lab2.html">cs120 - Linear Regression with DataFrames</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab2.html#part-1-read-and-parse-the-initial-dataset">Part 1: Read and parse the initial dataset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#a-load-and-check-the-data">1a) Load and check the data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#b-using-labeledpoint">1b) Using LabeledPoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#visualization-1-features">Visualization 1: Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#c-find-the-range">1c) Find the range</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#d-shift-labels">1d) Shift labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#visualization-2-shifting-labels">Visualization 2: Shifting labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#e-training-validation-and-test-sets">1e) Training, validation, and test sets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab2.html#part-2-create-and-evaluate-a-baseline-model">Part 2: Create and evaluate a baseline model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#a-average-label">2a) Average label</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#b-root-mean-squared-error">2b) Root mean squared error</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#c-training-validation-and-test-rmse">2c) Training, validation and test RMSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#visualization-3-predicted-vs-actual">Visualization 3: Predicted vs. actual</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab2.html#part-3-train-via-gradient-descent-and-evaluate-a-linear-regression-model">Part 3: Train (via gradient descent) and evaluate a linear regression model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#a-gradient-summand">3a) Gradient summand</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#b-use-weights-to-make-predictions">3b) Use weights to make predictions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#c-gradient-descent">3c) Gradient descent</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#d-train-the-model">3d) Train the model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#visualization-4-training-error">Visualization 4: Training error</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab2.html#part-4-train-using-sparkml-and-perform-grid-search">Part 4: Train using SparkML and perform grid search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#a-linearregression">4a) LinearRegression</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#b-transform">4b) Transform</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#c-evaluate-rmse">4c) Evaluate RMSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#d-grid-search">4d) Grid search</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#visualization-5-best-model-s-predictions">Visualization 5: Best model&#8217;s predictions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#visualization-6-hyperparameter-heat-map">Visualization 6: Hyperparameter heat map</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab2.html#part-5-add-interactions-between-features">Part 5: Add interactions between features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#a-add-2-way-interactions">5a) Add 2-way interactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#b-build-interaction-model">5b) Build interaction model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#c-evaluate-interaction-model-on-test-data">5c) Evaluate interaction model on test data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab2.html#d-use-a-pipeline-to-create-the-interaction-model">5d) Use a pipeline to create the interaction model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs120_lab3.html">cs120_lab3_ctr_df</a></li>
<li class="toctree-l2"><a class="reference internal" href="cs120_lab4.html">cs120 - PCA on Neuroscience Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab4.html#work-through-the-steps-of-pca-on-a-sample-dataset">Work through the steps of PCA on a sample dataset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-1-two-dimensional-gaussians">Visualization 1: Two-dimensional Gaussians</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#a-interpreting-pca">1a) Interpreting PCA</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#b-sample-covariance-matrix">1b) Sample covariance matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#c-covariance-function">1c) Covariance Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#d-eigendecomposition">1d) Eigendecomposition</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#e-pca-scores">1e) PCA scores</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab4.html#write-a-pca-function-and-evaluate-pca-on-sample-datasets">Write a PCA function and evaluate PCA on sample datasets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#a-pca-function">2a) PCA function</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#b-pca-on-data-random">2b) PCA on data_random</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-2-pca-projection">Visualization 2: PCA projection</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-3-three-dimensional-data">Visualization 3: Three-dimensional data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#c-3d-to-2d">2c) 3D to 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-4-2d-representation-of-3d-data">Visualization 4: 2D representation of 3D data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#d-variance-explained">2d) Variance explained</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab4.html#parse-inspect-and-preprocess-neuroscience-data-then-perform-pca">Parse, inspect, and preprocess neuroscience data then perform PCA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#a-load-neuroscience-data">3a) Load neuroscience data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#b-parse-the-data">3b) Parse the data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#c-min-and-max-fluorescence">3c) Min and max fluorescence</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-5-pixel-intensity">Visualization 5: Pixel intensity</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#d-fractional-signal-change">3d) Fractional signal change</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-6-normalized-data">Visualization 6: Normalized data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#e-pca-on-the-scaled-data">3e) PCA on the scaled data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-7-top-two-components-as-images">Visualization 7: Top two components as images</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-8-top-two-components-as-one-image">Visualization 8: Top two components as one image</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs120_lab4.html#feature-based-aggregation-and-pca">Feature-based aggregation and PCA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#a-aggregation-using-arrays">(4a) Aggregation using arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#b-recreate-with-np-tile-and-np-eye">(4b) Recreate with np.tile and np.eye</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#c-recreate-with-np-kron">(4c) Recreate with np.kron</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#d-aggregate-by-time">(4d) Aggregate by time</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#e-obtain-a-compact-representation">(4e) Obtain a compact representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-9-top-two-components-by-time">Visualization 9: Top two components by time</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#f-aggregate-by-direction">(4f) Aggregate by direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#g-compact-representation-of-direction-data">(4g) Compact representation of direction data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs120_lab4.html#visualization-10-top-two-components-by-direction">Visualization 10: Top two components by direction</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyspark-aws.html">PySpark on AWS (<code class="docutils literal"><span class="pre">pyspark-aws</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyspark-aws.html#setting-up-aws-and-pyspark">Setting up AWS and PySpark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#create-iam-user-key">Create IAM user key</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#create-admin-group-and-user">Create admin group and user</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#setup-an-s3-bucket">Setup an S3 Bucket</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#create-wordcount-script-to-submit">Create wordcount script to submit</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#create-emr-cluster">Create EMR cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#run-spark-application-on-emr">Run Spark application on EMR</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-aws.html#setup-pyspark-in-ipython-profile">Setup pyspark in ipython profile</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#finally-worked">Finally worked!</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#wrong-java-version">Wrong java version?</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#pyspark-options-giving-errors">pyspark options giving errors...</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#update-scala">Update scala?</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#rough-drafts">rough drafts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-aws.html#failed-windows-try">Failed Windows Try</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#windows">windows?</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-aws.html#retry-above-is-a-disaster">Retry, above is a disaster</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyspark-overflow.html"><code class="docutils literal"><span class="pre">pyspark-overflow.rst</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#how-to-get-a-value-from-the-row-object-in-spark-dataframe">How to get a value from the Row object in Spark Dataframe?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#how-to-add-a-constant-column-in-a-spark-dataframe">How to add a constant column in a Spark DataFrame?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#add-an-empty-column-to-spark-dataframe">Add an empty column to Spark DataFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#count-number-of-non-nan-entries-in-each-column-of-spark-dataframe">Count number of non-NaN entries in each column of Spark dataframe</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#use-simple-aggregation">Use simple aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#use-sql-null-semantics">Use SQL <code class="docutils literal"><span class="pre">NULL</span></code> semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#in-fractions">In fractions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#updating-a-dataframe-column-in-spark">Updating a dataframe column in spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#how-do-i-add-a-new-column-to-spark-data-frame-pyspark">How do I add a new column to spark data frame (Pyspark)?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#use-literals-lit">Use literals <code class="docutils literal"><span class="pre">lit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#transforming-an-existing-column">Transforming an existing column</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#using-join">Using <code class="docutils literal"><span class="pre">join</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#using-function-udf">Using function/UDF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#how-to-change-dataframe-column-names-in-pyspark">How to change dataframe column names in pyspark?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#option-1-using-selectexpr">Option 1. Using selectExpr.</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#option-2-using-withcolumnrenamed">Option 2. Using <code class="docutils literal"><span class="pre">withColumnRenamed</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#using-alias">Using alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#using-sqlcontext-sql">Using <code class="docutils literal"><span class="pre">sqlContext.sql</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#pyspark-dataframes-way-to-enumerate-without-converting-to-pandas">PySpark DataFrames - way to enumerate without converting to Pandas?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#dividing-two-columns-from-a-different-df">Dividing two columns from a different DF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-overflow.html#ones-i-just-bookmarked-for-future-reference">Ones I just bookmarked for future reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-overflow.html#reshaping-pivoting-data-in-spark-rdd-and-or-spark-dataframes">Reshaping/Pivoting data in Spark RDD and/or Spark DataFrames</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyspark-snippet.html"><code class="docutils literal"><span class="pre">pyspark-snippet.rst</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#data-from-application-examples-on-db-workspace">Data from <em>Application Examples</em> on DB Workspace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#list-out-datasets-important">List out datasets (Important)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#create-sample-json-file">Create sample JSON file</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#tables">Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#random-data-io">Random data-io</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#diamonds">Diamonds</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#february-2015-english-wikipedia-clickstream-data">February 2015 English Wikipedia Clickstream data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#dbf">DBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#spark-notebook-helpers-library-for-databricks">spark_notebook_helpers library for Databricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#create-toy-dataset">Create toy dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#print-rdd-per-item">Print RDD per item</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#databrick-helper-function-displaying-all-dfs-in-the-notebook">Databrick helper function displaying all DFs in the notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#get-shape-of-df-gotta-be-a-better-way">Get shape of DF (gotta be a better way)</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#random-snippets">Random snippets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#print-dataframes-in-my-workspace-super-ad-hoc">print dataframes in my workspace (super-ad-hoc)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#rename-column">Rename column</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#dbutils">dbutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#random-from-spark-essentials-spark-summit-2016">Random from Spark Essentials (Spark Summit 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-snippet.html#spark-for-data-scientists">Spark for Data Scientists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#tax-data">Tax Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#farmer-s-market-data">Farmer&#8217;s market data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#run-some-sql-create-tables">Run some sql, create tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyspark-snippet.html#cache-table-in-sql-or-sqlcontext">cache table in SQL or sqlContext</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyspark-practice.html"><code class="docutils literal"><span class="pre">pyspark-practice.rst</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#basics-dfs">Basics DFs</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#udfs">UDFs</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#sorting">Sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#create-df-from-list-of-tuples">Create DF from list of tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#groupby">groupby</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#practice-with-faker-data">Practice with faker data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyspark-practice.html#little-refrehser-on-generators">Little refrehser on generators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#register-table-to-use-sql">Register table to use SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyspark-practice.html#more">More</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">R Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../R/ds-R.html">R notes (<code class="docutils literal"><span class="pre">ds-R.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../R/control_var2.html">1 Controlling Confounds (with xtable)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/control_var2.html#set-variables">1.1 set variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/control_var2.html#regression">1.2 regression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/control_var2.html#lm1-without-controlling-for-weight-weight">1.2.1 lm1: without controlling for weight(weight)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/control_var2.html#lm2-here-we-control-for-weight">1.2.2 lm2: here we control for weight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/control_var2.html#in-case-you-want-to-add-the-fitted-lines-to-the-plot">1.2.3 In case you want to add the fitted lines to the plot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/sva_demo_jtleek2.html">2 R code from Jeff Leek&#8217;s page</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#dependencies">2.1 Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#download-the-data">2.2 Download the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#set-up-the-data">2.3 Set up the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#adjusting-for-batch-effects-with-a-linear-model">2.4 Adjusting for batch effects with a linear model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#adjusting-for-batch-effects-with-combat">2.5 Adjusting for batch effects with Combat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#comparing-combat-and-linear-adjustment">2.6 Comparing Combat and linear adjustment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#adjusting-for-batch-effects-with-sva">2.7 Adjusting for batch effects with sva</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#principal-components-for-population-structure">2.8 Principal components for population structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/sva_demo_jtleek2.html#notes-and-further-resources">2.9 Notes and further resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/t_1104b_combat_pca.html">3 Site-correction with ComBat - PCA analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/t_1104b_combat_pca.html#load-data">3.1 Load data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/t_1104b_combat_pca.html#scale-normalize-data">3.2 Scale normalize data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/t_1104b_combat_pca.html#study-pca-of-scale-normalized-data">3.3 Study pca of scale normalized data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/t_1104b_combat_pca.html#scattermatrix-plot">3.3.1 scattermatrix plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/t_1104b_combat_pca.html#scatter-matrix-using-lattice-splom">3.3.2 Scatter-matrix using <code class="docutils literal"><span class="pre">lattice::splom</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/t_1104b_combat_pca.html#correct-site-effect-via-running-combat-on-normalized-data">3.4 Correct site-effect via running ComBat on normalized data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/t_1104b_combat_pca.html#repeat-pca-plot-after-site-correction">3.4.1 Repeat pca plot after site-correction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/t_1104b_combat_pca.html#save-combat-corrected-data-matrix">3.5 Save ComBat corrected data-matrix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../R-ISL/R-ISL.html">R - Labs from ISL (<code class="docutils literal"><span class="pre">R-ISL</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch2.html">Ch2 Introduction to R</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch2.html#basic-commands">Basic Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch2.html#graphics">Graphics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch2.html#indexing-data">Indexing Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch2.html#loading-data">Loading Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch2.html#additional-graphical-and-numerical-summaries">Additional Graphical and Numerical Summaries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch3.html">Ch3 Linear Regression</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch3.html#simple-linear-regression">Simple Linear Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch3.html#multiple-linear-regression">Multiple Linear Regression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch3.html#interaction-terms">Interaction Terms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch3.html#qualitative-predictors">Qualitative Predictors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch3.html#writing-functions">Writing Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch4.html">Ch4 Logistic Regression, LDA, QDA, and KNN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch4.html#the-stock-market-data">The Stock Market Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch4.html#logistic-regression">Logistic Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch4.html#linear-discriminant-analysis">Linear Discriminant Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch4.html#quadratic-discriminant-analysis">Quadratic Discriminant Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch4.html#k-nearest-neighbors">K-Nearest Neighbors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch4.html#an-application-to-caravan-insurance-data">An Application to Caravan Insurance Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch5.html">Ch5 Cross-Validation and the Bootstrap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch5.html#the-validation-set-approach">The Validation Set Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch5.html#leave-one-out-cross-validation">Leave-One-Out Cross-Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch5.html#k-fold-cross-validation">k-Fold Cross-Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch5.html#the-bootstrap">The Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch5.html#estimating-the-accuracy-of-a-linear-regression-model">Estimating the Accuracy of a Linear Regression Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch6.html">Ch6 Linear Model Selection and Regularization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch6.html#lab-1-subset-selection-methods">Lab 1: Subset Selection Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#best-subset-selection">Best Subset Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#forward-and-backward-stepwise-selection">Forward and Backward Stepwise Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#choosing-among-models">Choosing Among Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch6.html#lab-2-ridge-regression-and-the-lasso">Lab 2: Ridge Regression and the Lasso</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#ridge-regression">Ridge Regression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#the-lasso">The Lasso</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch6.html#lab-3-pcr-and-pls-regression">Lab 3: PCR and PLS Regression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#principal-components-regression">Principal Components Regression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch6.html#partial-least-squares">Partial Least Squares</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch7.html">Ch7 Non-linear Modeling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch7.html#polynomial-regression-and-step-functions">Polynomial Regression and Step Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch7.html#splines">Splines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch7.html#gams">GAMs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch8.html">Ch8 Tree-Based Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch8.html#fitting-classification-trees">Fitting Classification Trees</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch8.html#bagging-and-random-forests">Bagging and Random Forests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch8.html#boosting">Boosting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch9.html">Ch9 Support Vector Machines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch9.html#support-vector-classifier">Support Vector Classifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch9.html#support-vector-machine">Support Vector Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch9.html#roc-curves">ROC Curves</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch9.html#svm-with-multiple-classes">SVM with Multiple Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch9.html#application-to-gene-expression-data">Application to Gene Expression Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R-ISL/ch10.html">Ch10 Unsupervised Learning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch10.html#lab-1-principal-components-analysis">Lab 1: Principal Components Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch10.html#lab-2-clustering">Lab 2: Clustering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch10.html#k-means-clustering">K-Means Clustering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch10.html#hierarchical-clustering">Hierarchical Clustering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R-ISL/ch10.html#lab-3-nci60-data-example">Lab 3: NCI60 Data Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch10.html#the-nci60-data">The NCI60 data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch10.html#pca-on-the-nci60-data">PCA on the NCI60 Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R-ISL/ch10.html#clustering-the-observations-of-the-nci60-data">Clustering the Observations of the NCI60 Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../R/ggplot/top-ggplot.html">ggplot-examples (<code class="docutils literal"><span class="pre">top-ggplot.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot/qplot.html">Ch2. Getting startd with qplot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/qplot.html#the-diamonds-dataset">The Diamonds dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/qplot.html#basic-use">2.3 Basic use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/qplot.html#color-size-shape-and-other-aesthetic-attributes">2.4 Color, size, shape, and other aesthetic attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/qplot.html#plot-geoms">2.5 Plot geoms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/qplot.html#add-a-smoother-to-plot">2.5.1 Add a smoother to plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/qplot.html#boxplots-and-jittered-points">2.5.2 Boxplots and jittered points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/qplot.html#histogram-and-density-plots">2.5.3 Histogram and density plots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/qplot.html#bar-charts">2.5.4 Bar charts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/qplot.html#time-series-with-line-and-path-plots">2.5.5 Time series with line and path plots</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/qplot.html#faceting">2.6 Faceting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot/mastery.html">Ch3. Mastering the Grammar</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/mastery.html#fuel-economy-date">3.2 Fuel economy date</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/mastery.html#building-a-scatterplot">3.3 Building a scatterplot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/mastery.html#mapping-aesthetics-to-data">Mapping aesthetics to data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/mastery.html#a-more-complex-plot">3.4 A more complex plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/mastery.html#data-structures">3.6 Data structures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot/ch4_layers.html">Ch4. Build a plot layer by layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#building-a-plot">Building a plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#data">Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#aesthetic-mappings">Aesthetic mappings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#specifying-the-aesthetics-in-the-plot-vs-in-the-layers">Specifying the aesthetics in the plot vs. in the layers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#setting-vs-mapping">Setting vs. mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#id19">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#geoms">Geoms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#id26">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#stats">Stats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#generated-variables">Generated variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#id33">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/ggplot/ch4_layers.html#position-adjustments">Position adjustments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/ggplot/ch4_layers.html#id54">Exercises</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../R/ggplot-book/ggplot-book.html">ggplot-book (<code class="docutils literal"><span class="pre">ggplot-book.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch1-introduction.html">Ch1 Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch2-getting-started.html">Ch2 Getting started with ggplot2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch3-toolbox.html">Ch3 Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch4-mastery.html">Ch4 Mastering the grammar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch5-layers.html">Ch5 Build a plot layer by layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch6-scales.html">Ch6 Scales, axes, and legends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch7-position.html">Ch7 Positioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch8-themes.html">Ch8 Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch9-tidy-data.html">Ch9 Data analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch10-data-manip.html">Ch10 Data transformation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch11-modelling.html">Ch11 Modelling for visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../R/ggplot-book/ch12-programming.html">Ch12 Programming with ggplot2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../R/lattice-R-book/lattice-R.html">lattice plot examples (<code class="docutils literal"><span class="pre">lattice-R.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch1.html">Ch1 - Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch1.html#figure-1-1-conditional-histogram">Figure 1.1 (conditional histogram)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch1.html#figure-1-2-conditional-density-plot">Figure 1.2 (conditional density plot)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch1.html#figure-1-3-grouped-kde-plot">Figure 1.3 (grouped kde plot)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch1.html#figure-1-4-conditional-histogram-and-kde-grouped-in-a-single-figure">Figure 1.4 (conditional histogram and kde grouped in a single figure)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch2.html">Ch2 - A Technical Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch2.html#dimension-and-physical-layout">Dimension and Physical Layout</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-1-a-trelis-display-of-the-data-object">Figure 2.1 (A Trelis display of the <strong>Data</strong> Object)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-2-subset-display-of-the-trellis-object">Figure 2.2 (subset display of the Trellis object)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-3-aspect-ratio-control">Figure 2.3 (aspect ratio control)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-4">Figure 2.4</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-5-fig-2-5-with-spacing-between-column-blocks">Figure 2.5 (fig 2.5 with spacing between column blocks)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch2.html#grouped-displays">Grouped displays</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-6">Figure 2.6</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch2.html#annotation-captions-labels-and-legends">Annotation: Captions, labels, and legends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-7">Figure 2.7</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch2.html#scale-and-axes">Scale and Axes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-8">Figure 2.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-9">Figure 2.9</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch2.html#the-panel-function">The Panel function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-10">Figure 2.10</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch2.html#figure-2-11">Figure 2.11</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch3.html">Ch3 - Displaying Univariate Distributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#datasets-used-in-this-chapter">Datasets used in this Chapter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#faithful">faithful</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#gvhd10">gvhd10</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#chem97">Chem97</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#quakes">quakes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#barley">barley</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#density-plot">Density plot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-1">Figure 3.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-2">Figure 3.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-3">Figure 3.3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#histograms">Histograms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-4">Figure 3.4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#normal-qq-plots">Normal QQ Plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-5">Figure 3.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-6">Figure 3.6</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-7">Figure 3.7</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#the-empirical-cdf">The empirical CDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-8">Figure 3.8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#two-sample-qq-plots">Two-sample QQ-plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-9">Figure 3.9</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-10">Figure 3.10</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#box-and-whisker-plots">Box-and-whisker plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-11">Figure 3.11</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-12">Figure 3.12</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-13">Figure 3.13</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-14">Figure 3.14</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch3.html#strip-plot">Strip plot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-15">Figure 3.15</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-16">Figure 3.16</a></li>
<li class="toctree-l4"><a class="reference internal" href="../R/lattice-R-book/ch3.html#figure-3-17">Figure 3.17</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch4.html">Ch4 - Displaying Multiway Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-1">Figure 4.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-2">Figure 4.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-3">Figure 4.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-4">Figure 4.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-5">Figure 4.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-6">Figure 4.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-7">Figure 4.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-8">Figure 4.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch4.html#figure-4-9">Figure 4.9</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch5.html">Ch5 - Scatter Plots and Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-1">Figure 5.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-2">Figure 5.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-3">Figure 5.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-4">Figure 5.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-5">Figure 5.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-6">Figure 5.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-7">Figure 5.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-8">Figure 5.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-9">Figure 5.9</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-10">Figure 5.10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-11">Figure 5.11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-12">Figure 5.12</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-13">Figure 5.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-14">Figure 5.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-15">Figure 5.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-16">Figure 5.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-17">Figure 5.17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-18">Figure 5.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch5.html#figure-5-19">Figure 5.19</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch6.html">Ch6 - Trivariate Displays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-1">Figure 6.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-2">Figure 6.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-3">Figure 6.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-4">Figure 6.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-5">Figure 6.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-6">Figure 6.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-7">Figure 6.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-8">Figure 6.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-9">Figure 6.9</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-10">Figure 6.10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-11">Figure 6.11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-12">Figure 6.12</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-13">Figure 6.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-14">Figure 6.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-15">Figure 6.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-16">Figure 6.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-17">Figure 6.17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-18">Figure 6.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch6.html#figure-6-19">Figure 6.19</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch7.html">Ch7 - Graphical Parameters and Other Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch7.html#figure-7-1">Figure 7.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch7.html#figure-7-2">Figure 7.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch7.html#figure-7-2-alternative">Figure 7.2 (alternative)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch7.html#figure-7-3">Figure 7.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch7.html#figure-7-4">Figure 7.4</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch8.html">Ch8 - Plot Coordinates and Axis Annotation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch8.html#figure-8-1">Figure 8.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch8.html#figure-8-2">Figure 8.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch8.html#figure-8-3">Figure 8.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch8.html#figure-8-4">Figure 8.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch8.html#figure-8-5">Figure 8.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch8.html#figure-8-6">Figure 8.6</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch9.html">Ch9 - Labels and Legends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch9.html#figure-9-1">Figure 9.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch9.html#figure-9-1-alternative-using-auto-key">Figure 9.1 (alternative, using auto.key)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch9.html#figure-9-1-yet-another-alternative-using-drop-true">Figure 9.1 (yet another alternative, using drop=TRUE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch9.html#figure-9-2">Figure 9.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch9.html#figure-9-3">Figure 9.3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch10.html">Ch10 - Data Manipulation and Related Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-1">Figure 10.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-2">Figure 10.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-3">Figure 10.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-4">Figure 10.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-5">Figure 10.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-6">Figure 10.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-7">Figure 10.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-8">Figure 10.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-9">Figure 10.9</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-10">Figure 10.10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-11">Figure 10.11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-12">Figure 10.12</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-13">Figure 10.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-14">Figure 10.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-15">Figure 10.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-16">Figure 10.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-17">Figure 10.17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-18">Figure 10.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-19">Figure 10.19</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-20">Figure 10.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-21">Figure 10.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-22">Figure 10.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-23">Figure 10.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-24">Figure 10.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch10.html#figure-10-25">Figure 10.25</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch11.html">Ch11 - Manipulating the <em>trellis</em> object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch11.html#figure-11-1">Figure 11.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch11.html#figure-11-2">Figure 11.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch11.html#figure-11-3">Figure 11.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch11.html#figure-11-4">Figure 11.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch11.html#figure-11-5">Figure 11.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch11.html#figure-11-6">Figure 11.6</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch12.html">Ch12 - Interacting with Trellis Displays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch12.html#figure-12-1">Figure 12.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch12.html#figure-12-2">Figure 12.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch12.html#figure-12-3">Figure 12.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch12.html#figure-12-4">Figure 12.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch12.html#figure-12-5">Figure 12.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch12.html#figure-12-6">Figure 12.6</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch13.html">Ch13 - Advanced Panel Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-1">Figure 13.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-2">Figure 13.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-3">Figure 13.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-4">Figure 13.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-5">Figure 13.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-6">Figure 13.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-7">Figure 13.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-8">Figure 13.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-9">Figure 13.9</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch13.html#figure-13-10">Figure 13.10</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../R/lattice-R-book/ch14.html">Ch14 - New Trellis Displays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch14.html#figure-14-1">Figure 14.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch14.html#figure-14-2">Figure 14.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch14.html#figure-14-3">Figure 14.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch14.html#figure-14-4">Figure 14.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../R/lattice-R-book/ch14.html#figure-14-5">Figure 14.5</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Plotly demos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plotly_demos/top-plotly.html">Plotly demos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html">Choose my Geolocator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html#try-to-pinpoint-huntsman-hall">Try to pinpoint Huntsman Hall</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html#hmmm-that-s-pretty-off">Hmmm...that&#8217;s pretty off...</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html#url-request-using-freegeopi">URL Request using freegeopi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html#that-s-also-quite-off">That&#8217;s also quite off....</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html#try-geolocation-python">Try geolocation-python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/choose_my_geolocator.html#success">Success!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos/google_big_query.html">Google Big Query Demo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/google_big_query.html#top-10-hacker-news-submissions-by-score">Top 10 Hacker News Submissions (by score)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/google_big_query.html#from-which-top-level-domain-tld-most-of-the-stories-come">From which Top-level domain (TLD) most of the stories come?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/google_big_query.html#public-response-to-the-who-is-hiring-posts">Public response to the &#8220;Who Is Hiring?&#8221; posts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/google_big_query.html#submission-traffic-volume-in-a-week">Submission Traffic Volume in a Week</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/google_big_query.html#programming-language-trend-on-hackernews">Programming Language Trend on HackerNews</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos/mysql_plotly.html">MySQL with Plotly</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#first-download-the-world-database">First download the world database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#install-database-in-mysql">Install database in mysql</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#for-this-demo-create-user-with-all-privileges-to-this-world-database">For this demo, create user with all privileges to this <code class="docutils literal"><span class="pre">world</span></code> database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#alright-we-are-in-business-let-s-analyze-this-database">Alright, we are in business. Let&#8217;s analyze this database!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#create-pandas-dataframe">create pandas DataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#a-bit-of-data-cleansing">A bit of data cleansing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#plot-interactive-scatterplots">Plot interactive scatterplots!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/mysql_plotly.html#prettify-the-above">prettify the above :)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html">Plotly and SQLite</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#create-database-file-on-disk-by-reading-in-subset-of-data">Create database file on disk by reading in subset of data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#alright-let-s-preview-the-table">Alright, let&#8217;s preview the table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#k-let-s-do-some-plotly">K, let&#8217;s do some plotly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#housing-and-development-dept-receives-the-most-complaints">Housing and Development Dept receives the most complaints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#heat-hot-water-is-the-most-common-complaint">Heat / Hot Water is the most common complaint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#what-s-the-most-complain-in-each-city">What&#8217;s the most complain in each city?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#conclusion">Conclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#part2-slite3-timeseries-with-pandas">Part2: Slite3 timeseries with pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#filter-noise-complaints-by-hour">Filter noise complaints by hour</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#segregate-complaints-by-hour">Segregate complaints by hour</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/plotly_sqlite.html#aggregate-time-series">Aggregate time series</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html">Steph Curry Demo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#data-transformation-for-querying">Data Transformation for querying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#shot-locations">Shot locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#create-the-court">Create the court</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#outer-lines">Outer Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#basketball-hoop">2. basketball hoop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#basket-backboard">Basket Backboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#outer-box-of-three-second-area">Outer box of three-second area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#inner-box-of-three-second-area">Inner box of three-second area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#three-point-line-left">Three-point line (left)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#three-point-line-right">Three-point line (right)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#three-point-arc">Three-point arc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#center-circle">Center circle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#restraining-circe">Restraining circe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#free-throw-circle">Free-throw circle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#restricted-area">Restricted area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#chart-the-shots">Chart the shots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/steph_curry_demo.html#good-stuff-let-s-save-in-plotly">Good stuff! let&#8217;s save in plotly</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos/spark-plotly.html">Spark demo with Plotly</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/spark-plotly.html#check-pyspark-is-loaded-correctly">Check pyspark is loaded correctly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/spark-plotly.html#download-bike-data">Download bike data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/spark-plotly.html#register-dataframe-as-table-to-use-sql-commands">Register dataframe as table to use SQL commands!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/spark-plotly.html#now-let-s-visualize">Now let&#8217;s visualize!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos/spark-plotly.html#pyspark-dataframe-to-pandas-dataframe">PySpark Dataframe to Pandas Dataframe</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plotly_pandas/top-plotly-pandas.html">Plotly &#8211; pandas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html">Cufflinks - Pandas Like Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#themes">Themes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#basic-line-plots-time-series">Basic line plots (time series)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#bar-plots">Bar Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#multiple-bars">Multiple bars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#stacked-bars">Stacked bars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#horizontal-bars-kind-barh">Horizontal bars (kind=&#8217;barh&#8217;)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#histograms">Histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#normalized-over-probability">Normalized over probability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#subplots">Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#boxplots">Boxplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#grouping-values">Grouping values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#area-plots">Area Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#scatter-plots">Scatter plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#assign-color-via-dict-or-list">Assign color via dict or list</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#use-size-to-set-bubble-size">Use size to set bubble size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#scattermatrix">Scattermatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#id3">Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#irregular-shaped-subplots">irregular shaped subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#shapes">Shapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - Pandas Like Visualization.html#other-shapes">Other shapes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html">Cufflinks - chart gallery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#line-chart">Line Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#basic">Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#filled-line-plot">Filled line plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#with-best-fit-line">With best fit line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#scatter-chart">Scatter Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#spread-chart">Spread Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#bar-chart">Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#default">Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#stacked-bars">Stacked bars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#box-plot">Box Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#historgram">Historgram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#heatmap-plot">Heatmap Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#bubble-chart">Bubble Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#scatter-3d">Scatter 3D</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#bubble-3d">Bubble 3D</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - chart gallery.html#surface">Surface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html">Cufflinks - color management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html#cufflinks-colors">Cufflinks Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html#color-conversions">Color Conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html#normalization">Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html#color-ranges">Color Ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html#color-tables">Color Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - color management.html#color-generators">Color Generators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html">Cufflinks - tutorial from plotly (best)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#intro">Intro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#python-version">Python version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#cufflinks-version">Cufflinks version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#scatter-matrix">scatter_matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#offline-mode">Offline mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#change-default-config">Change default config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#chart-types">Chart Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#line-charts">Line charts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#bar-charts">Bar charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#plot-series-directly">Plot series directly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#plot-a-dataframe-row-as-a-bar">Plot a dataframe row as a bar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#grouped-bar-chart">Grouped bar chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#stacked">Stacked</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#horizontal">Horizontal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#themes">Themes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#histograms">Histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#customizing-histogram-style">Customizing histogram style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#subplots">Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#box-plots">Box plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#area-charts">Area charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#stacked-area-chart">Stacked area chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#non-stacked-area-charts">Non-stacked area charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#scatter-plot">Scatter plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#demo1">Demo1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#multiple-scatter-plot-use-python">++Multiple scatter plot? Use python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#grouping-use-python">+++Grouping? Use python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#bubble-charts">BUBBLE CHARTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#id1">Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#id2">Scatter matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#heatmaps">Heatmaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#lines-and-shaded-areas">LINES AND SHADED AREAS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#hline-vline">hline, vline</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#hspan-vspan-for-shaded-region">hspan, vspan for shaded region</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#extra-param-as-dict">Extra param as dict</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#customizing-figures">+++Customizing Figures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks - tutorial from plotly (best).html#crux">+++Crux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html">Cufflinks_Basic_Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#customizing-themes">Customizing Themes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#bestfit-lines">Bestfit Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#customizing-colors">Customizing Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#filled-traces">Filled Traces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#bar-charts">Bar Charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#spread-and-ratio-charts">Spread and Ratio charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#annotations">Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#output-as-image">Output as Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#advanced-use">++Advanced Use</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#get-figure-object">Get figure object</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#get-data-object">Get Data object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/Cufflinks_Basic_Tutorial.html#get-layout-object">Get Layout object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/color-lover.html">color-lover</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/color-lover.html#using-colorlover-to-easily-access-colorscale">Using Colorlover to easily access colorscale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/color-lover.html#binding-plotly-to-pandas-dataframes-cufflinks">Binding Plotly to Pandas Dataframes ( Cufflinks )</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/color-lover.html#plotting-the-data-using-plotly">Plotting the data using Plotly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/color-lover.html#adding-colorscales-using-colorlover">Adding Colorscales using Colorlover</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/pandas-boxplots.html">pandas-boxplots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/pandas-boxplots.html#pandas-boxplot-with-cufflinks">Pandas boxplot with cufflinks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/plotly-configs.html">plotly-configs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html">plotly-pandas-basic-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#pandas-subplots">Pandas subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#overlaying-trace-should-be-done-in-python">Overlaying trace should be done in python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#sync-hover-text">Sync hover text</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#bubble-charts-pandas">Bubble charts pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#multiple-axes">Multiple axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#use-secondary-y">Use secondary_y</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#secondary-y-axis-with-multiple-chart-types">SECONDARY Y AXIS WITH MULTIPLE CHART TYPES</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#line-charts">Line-charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#cufflinks-demo">Cufflinks demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#set-line-color-and-style-in-cufflinks">+++Set Line Color and Style in Cufflinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#updating-cufflinks-plots">Updating cufflinks plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#time-series">Time series</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#demo1">Demo1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-basic-charts.html#subplots">Subplots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html">plotly-pandas-statistical-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#d-density-plots">2d density plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#d-histogram">2D Histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#histograms">Histograms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#basic-histogram-in-pandas">Basic Histogram in Pandas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#multiple-histograms-in-pandas-cufflinks">Multiple histograms in Pandas (cufflinks)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#histograms-binning-and-normalization-in-pandas">Histograms binning and normalization in Pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#histograms-subplots-in-pandas">Histograms subplots in Pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#box-plots">Box-plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#basic-box-plot">Basic Box Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#use-cufflinks">Use cufflinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#error-bars">Error bars</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#discrete-fixed-error-bars">Discrete, fixed error bars</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#discrete-variable-error-bars">Discrete, variable error bars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#asymmetric-error-bars-with-a-constant-offset">Asymmetric Error Bars with a Constant Offset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_pandas/plotly-pandas-statistical-charts.html#bar-chart-with-error-bars">Bar Chart with Error Bars</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plotly_FF/top-plotly-FF.html">Plotly FigureFactory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html">Figure Factory &#8211; my favorites!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#create-2d-density">create_2D_density</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#simple-2d-density">Simple 2d Density</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#add-colorscale">add colorscale</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#create-dendrogram">create_dendrogram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#simple-bottom-oriented-dendrogram">Simple bottom oriented dendrogram</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#dendrogram-to-put-on-the-left-of-the-heatmap">Dendrogram to put on the left of the heatmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#dendrogram-with-pandas">Dendrogram with Pandas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#with-heatmap">With heatmap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#create-distplot">create_distplot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#simple-distplot">simple distplot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#two-data-sets-and-added-rug-text">Two data sets and added rug text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#normal-distribution-plot-with-no-rug">normal distribution plot with no rug</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#distplot-with-pandas">Distplot with pandas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#create-scatterplotmatrix">create_scatterplotmatrix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#diagonal-boxplots">Diagonal boxplots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#use-a-theme-to-style-the-subplots">Use a Theme to Style the Subplots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#example-4-with-interval-factoring">Example 4 with Interval Factoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#using-the-colormap-as-a-dictionary">Using the colormap as a Dictionary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#create-table">create_table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#simple-plotly-table">Simple Plotly Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#table-with-custom-coloring">Table with Custom Coloring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#using-pandas">Using pandas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#create-violin">create_violin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#multiple-violin-plots-with-qualitative-coloring">Multiple Violin Plots with Qualitative Coloring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory-favorites.html#violin-plots-with-colorscale">Violin Plots with Colorscale</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html">Figure Factory Demos (a-o)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-2d-density">create_2D_density</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#simple-2d-density-plot">Simple 2D Density plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#using-parameters">Using Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-annotated-heatmap">create_annotated_heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-candlestick">create_candlestick</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#simple-candlestick-chart-from-a-pandas-dataframe">Simple candlestick chart from a Pandas DataFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#add-text-and-annotations-to-the-candlestick-chart">Add text and annotations to the candlestick chart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#customize-the-candlestick-colors">Customize the candlestick colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#candlestick-chart-with-datetime-objects">Candlestick chart with datetime objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-dendrogram">create_dendrogram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#simple-bottom-oriented-dendrogram">Simple bottom oriented dendrogram</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#dendrogram-to-put-on-the-left-of-the-heatmap">Dendrogram to put on the left of the heatmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#dendrogram-with-pandas">Dendrogram with Pandas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-distplot">create_distplot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#simple-distplot-of-1-dataset">Simple distplot of 1 dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#two-data-sets-and-added-rug-text">Two data sets and added rug text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#plot-with-normal-curve-and-hide-rug-plot">Plot with normal curve and hide rug plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#distplot-with-pandas">Distplot with pandas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-gantt">create_gantt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#simple-gantt-chart">Simple Gantt Chart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#index-by-column-with-numerical-entries">Index by Column with Numerical Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#index-by-column-with-string-entries">Index by Column with String Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#use-a-dictionary-for-colors">Use a dictionary for colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#use-a-pandas-dataframe">Use a pandas dataframe</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#create-ohlc">create_ohlc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#simple-ohlc-chart-from-a-pandas-dataframe">Simple OHLC chart from a Pandas DataFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#add-text-and-annotations-to-the-ohlc-chart">Add text and annotations to the OHLC chart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#customize-the-ohlc-colors">Customize the OHLC colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactories (a-o).html#ohlc-chart-with-datetime-objects">OHLC chart with datetime objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html">Figure Factory Demos (q-z)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#create-quiver">create_quiver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#trivial-quiver">Trivial Quiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#quiver-plot-using-meshgrid">Quiver plot using meshgrid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#styling-the-quiver-plot">Styling the quiver plot</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#create-scatterplotmatrix">create_scatterplotmatrix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#vanilla-scatterplot-matrix">Vanilla Scatterplot Matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#indexing-a-column">Indexing a Column</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#styling-the-diagonal-subplots">Styling the Diagonal Subplots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#use-a-theme-to-style-the-subplots">Use a Theme to Style the Subplots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#example-4-with-interval-factoring">Example 4 with Interval Factoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#using-the-colormap-as-a-dictionary">Using the colormap as a Dictionary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#create-streamline">create_streamline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#from-aeropython">from AeroPython</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#create-table">create_table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#simple-plotly-table">Simple Plotly Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#table-with-custom-coloring">Table with Custom Coloring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#simple-plotly-table-with-pandas">Simple Plotly Table with Pandas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#create-trisurf">create_trisurf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#torus">Torus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#mobius-band">Mobius Band</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#using-a-custom-colormap-function-with-light-cone">Using a Custom Colormap Function with Light Cone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#enter-color-func-as-a-list-of-colors">Enter color_func as a list of colors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#create-violin">create_violin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#single-violin-plot">Single Violin Plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#multiple-violin-plots-with-qualitative-coloring">Multiple Violin Plots with Qualitative Coloring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_FF/FigureFactory (q-z).html#violin-plots-with-colorscale">Violin Plots with Colorscale</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plotly_layout/top-plotly-layout.html">Plotly layout options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html">plotly-layout-options-axes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#toggling-axes-lines-ticks-labels-and-autorange">Toggling Axes Lines, Ticks, Labels, and Autorange</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#tick-placement-color-and-style">Tick Placement, Color, and Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#set-and-style-axes-title-labels-and-ticks">Set and Style Axes Title Labels and Ticks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#styling-and-coloring-axes-and-the-zero-line">Styling and Coloring Axes and the Zero-Line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#setting-the-range-of-axes-manually">Setting the Range of Axes Manually</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#logarithmic-axes">Logarithmic Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#reversed-axes">Reversed Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#reversed-axes-with-range-min-max-specified">Reversed Axes with Range ( Min/Max ) Specified</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#nonnegative-tozero-and-normal-rangemode">nonnegative, tozero, and normal Rangemode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes.html#enumerated-ticks-with-tickvals-and-ticktext">Enumerated Ticks with Tickvals and Ticktext</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes3d.html">plotly-layout-options-axes3d</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes3d.html#range-of-axes">Range of Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes3d.html#set-axes-title">Set Axes Title</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes3d.html#ticks-formatting">Ticks Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-axes3d.html#background-color-and-grid-color">Background color and grid color</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html">plotly-layout-options-legend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#basic-legend">Basic legend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#positioning-the-legend">Positioning the Legend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#grouped-legends">Grouped legends</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#styling-and-coloring-the-legend">Styling and Coloring the Legend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#selectively-hide-legend-entries">Selectively hide legend entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#hiding-legend-entries-in-grouped-legends">Hiding Legend Entries In Grouped Legends</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-legend.html#horizontal-legends">Horizontal legends</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html">plotly-layout-options-subplots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#simple-subplots">Simple subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#multiple-subplots-with-titles">Multiple Subplots With Titles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#customizing-subplot-axes">Customizing Subplot Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#subplots-with-shared-y-axes">Subplots with Shared Y-Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#stacked-subplots">Stacked Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#custom-sized-subplot-with-subplot-titles">+++Custom Sized Subplot with Subplot Titles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#subplots-with-shared-x-axes">Subplots with Shared X-Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#subplots-with-shared-axes">Subplots with shared Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#multiple-custom-sized-subplots">Multiple Custom Sized Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-subplots.html#subplot-with-custom-sizes">++Subplot with custom sizes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html">plotly-layout-options-text-and-annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#adding-text-to-data-in-line-and-scatter-plots">Adding Text to Data in Line and Scatter Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#adding-hover-text-to-data-in-line-and-scatter-plots">Adding Hover Text to Data in Line and Scatter Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#simple-annotation">Simple Annotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#multiple-annotations">Multiple Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#custom-text-color-and-styling">Custom Text Color and Styling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#disabling-hover-text">Disabling Hover Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#styling-and-coloring-annotations">Styling and Coloring Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#text-font-as-an-array-styling-each-text-element">Text Font as an Array - Styling Each Text Element</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options-text-and-annotations.html#adding-annotations-with-xref-and-yref-as-paper">Adding Annotations with xref and yref as Paper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html">plotly-layout-options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#adding-logos">Adding logos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#add-background-image">Add background image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#latex">Latex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#text-and-font-styling-global-font-properties">Text and Font Styling (global font properties)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#setting-graph-size">Setting graph size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#setting-the-title-legend-entries-and-axis-titles">Setting the Title, Legend Entries, and Axis Titles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#multiple-axes">Multiple Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#two-y-axes">Two y-axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#multiple-y-axes">Multiple y-axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_layout/plotly-layout-options.html#inset-plots">Inset Plots</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plotly_demos_api/top-plotly-api.html">Plotly &#8211; API demos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html">3d-plot-demos-camera-and-lighting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#d-camera-controls">3d camera controls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#default-parameters-eye-x-1-25-y-1-25-z-1-25">Default parameters: eye=(x=1.25, y=1.25, z=1.25)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#lower-the-view-point-eye-x-2-y-2-z-0-1">Lower the View Point: eye=(x=2, y=2, z=0.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#x-z-plane-eye-x-0-1-y-2-5-z-0-1">X-Z plane: eye=(x=0.1, y=2.5, z=0.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#y-z-plane-eye-x-2-5-y-0-1-z-0-1">Y-Z plane: eye=(x=2.5, y=0.1, z=0.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#view-from-above-eye-x-0-1-y-0-1-z-2-5">View from Above - eye=(x=0.1, y=0.1, z=2.5)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#zooming-in-eye-x-0-1-y-0-1-z-1">Zooming In: eye=(x=0.1, y=0.1, z=1)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#d-surface-lighting">3d surface lighting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#ambient">Ambient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#roughness">Roughness</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#diffuse">Diffuse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#fresnel">Fresnel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#specular">Specular</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos-camera-and-lighting.html#combined-effects">Combined effects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html">3d-plot-demos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-surface-subplots">3D Surface Subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-surface-coloring-subplots-too">3D Surface Coloring (subplots too!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-point-clustering">3d point clustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-network-graph">3d network graph</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#assign-node-posibion">Assign node posibion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#set-data-for-the-plotly-plot-of-the-graph">Set data for the Plotly plot of the graph:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#define-trace-objects">Define trace objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#define-layout-object">Define layout object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#plot">Plot!</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-filled-line-plots">3d filled line plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-scatter-plots">3d scatter plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-scatter-plot-with-colorscaling">3D Scatter Plot with Colorscaling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#projection-of-3d-surface">Projection of 3D surface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#set-trace">Set trace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#set-layout">set layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#discretization-of-each-plane">Discretization of each Plane</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#define-color-for-each-xyz-plane">Define color for each xyz plane</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#finally-plot">finally, plot</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-mesh">3d mesh</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#simple-3d-mesh-example">Simple 3D Mesh example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-mesh-example-with-alphahull">3D Mesh example with Alphahull</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#mesh-tetrahedron">Mesh Tetrahedron</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#mesh-cube">Mesh Cube</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-wireframe-plot">3d-wireframe plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-surface-plots">3d-surface plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#topographical-3d-surface-plot">Topographical 3D Surface Plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#multiple-3d-surface-plots">Multiple 3D Surface Plots</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#d-parametric-plots">3d Parametric plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#basic-parametric-plot">Basic parametric plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#parameteric-plot-with-colorscale">Parameteric Plot with Colorscale</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/3d-plot-demos.html#ribbon-plots">Ribbon plots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html">annotated-heatmap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html#simple-annotated-heatmp">Simple annotated heatmp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html#defined-colorscale">Defined Colorscale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html#custom-colorscale">Custom Colorscale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html#custom-text-and-x-y-labels">Custom Text and X &amp; Y Labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html#annotated-heatmap-with-numpy">Annotated Heatmap with numpy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/annotated-heatmap.html#custom-hovertext">Custom Hovertext</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/bar-charts.html">bar-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#basic-bar-charts">Basic bar charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#grouped-bar-charts">Grouped bar charts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#set-barmode-group-in-layout">Set barmode=group in layout</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#stacked-bar-chart">Stacked Bar Chart</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#set-barmode-stack-in-layout">Set <code class="docutils literal"><span class="pre">barmode=stack</span></code> in layout</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#styled-bar-chart-with-direct-labels">Styled Bar Chart with Direct Labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#rotated-bar-chart-labels">Rotated Bar Chart Labels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#xaxis-dict-tickangle-45">xaxis=dict(tickangle=-45)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#customizing-individual-bar-colors">Customizing Individual Bar Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#bar-chart-with-hover-text">Bar chart with hover text</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#waterfall-bar-chart">Waterfall Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bar-charts.html#bar-chart-with-relative-barmode">Bar Chart with Relative Barmode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html">bubble-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#note">note</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#simple-bubblecharts">Simple bubblecharts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#setting-marker-size-and-color">Setting Marker Size and Color</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#hover-text-with-bubble-charts">Hover Text with Bubble Charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#scaling-the-size-of-bubble-charts">Scaling the Size of Bubble Charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#bubble-charts-with-colorscale">Bubble Charts with Colorscale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/bubble-charts.html#categorical-bubble-charts">Categorical Bubble Charts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html">chord-diagram</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#chord-diagram-example-from-plotly">Chord Diagram example from Plotly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#define-nodes">Define nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#define-edges">Define edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#node-position">Node position</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#exotic-bezier-curve-stuffs">Exotic Bezier curve stuffs...</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#set-data-and-layout-for-plotly">Set data and layout for Plotly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#more-bezier-curve-stuffs">more Bezier curve stuffs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/chord-diagram.html#finally-plot">Finally, plot!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/dendrograms.html">dendrograms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#basic-dendrogram">Basic Dendrogram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#set-orientation-and-add-labels">Set orientation and add labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#plot-a-dendrogram-with-a-heatmap">Plot a Dendrogram with a Heatmap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#get-data">get data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#initialize-figure-by-creating-upper-dendrogram">Initialize figure by creating upper dendrogram</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#create-heatmap">Create heatmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#edit-layout">Edit layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotly_demos_api/dendrograms.html#plot">Plot!</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/dropdowns (daiji).html">dropdowns (daiji)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/dropdowns (daiji).html#simple-dropdown-menu">Simple Dropdown Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/dropdowns (daiji).html#add-multiple-dropdown-menus">Add Multiple Dropdown Menus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/filled-area-plots.html">filled-area-plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/filled-area-plots.html#basic-overlaid-area-chart">Basic Overlaid Area Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/filled-area-plots.html#overlaid-area-chart-without-boundary-lines">Overlaid Area Chart Without Boundary Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/filled-area-plots.html#interior-filling-for-area-chart">Interior Filling for Area Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/filled-area-plots.html#stacked-area-chart-with-cumulative-values">Stacked Area Chart with Cumulative Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/filled-area-plots.html#stacked-area-chart-with-original-values">Stacked Area Chart with Original Values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/heatmap-and-contour-colorscales.html">heatmap-and-contour-colorscales</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmap-and-contour-colorscales.html#custom-discretized-heatmap-colorscale">Custom Discretized Heatmap Colorscale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmap-and-contour-colorscales.html#colorscale-for-scatter-plots">Colorscale for Scatter Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmap-and-contour-colorscales.html#colorscale-for-contour-plot">Colorscale for Contour Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmap-and-contour-colorscales.html#custom-heatmap-colorscale">Custom Heatmap Colorscale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmap-and-contour-colorscales.html#custom-contour-plot-colorscale">Custom Contour Plot Colorscale</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/heatmaps.html">heatmaps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmaps.html#basic-heatmaps">Basic heatmaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmaps.html#heatmap-with-categorical-axis-labels">Heatmap with Categorical Axis Labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmaps.html#annotated-heatmap">Annotated Heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmaps.html#heatmap-with-unequal-block-sizes">Heatmap with Unequal Block Sizes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/heatmaps.html#heatmap-with-datetime-axis">Heatmap with Datetime Axis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html">horizontal-bar-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html#basic-horizontal-bar-charts">Basic horizontal bar charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html#colored-horizontal-bar-chart">Colored Horizontal Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html#color-palette-for-bar-chart">Color Palette for Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html#define-traces">Define traces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html#define-layout">Define layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/horizontal-bar-charts.html#bar-chart-with-line-plot">Bar Chart with Line Plot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/igraph-networkx-comparison.html">igraph-networkx-comparison</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/igraph-networkx-comparison.html#download-data-from-uci">Download data from UCI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/igraph-networkx-comparison.html#igraph">igraph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/igraph-networkx-comparison.html#networkx">Networkx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/igraph-networkx-comparison.html#repeat-with-different-pos">Repeat with different pos</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html">ipython-notebooks-demo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#scatter-plots">Scatter plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#box-plots">Box plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#heatmap">Heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#sized-bubble-plots">Sized bubble plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#time-series">Time series</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#heatmap-again">heatmap again</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#airflight-map">Airflight map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/ipython-notebooks-demo.html#use-of-py-get-figure">Use of py.get_figure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/line-charts.html">line-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#simple-line-charts">Simple line charts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#line-plot-models">Line plot models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#style-line-plots">Style Line plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#connect-data-gaps">Connect Data Gaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#interpolation-with-line-plots">Interpolation with Line Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#label-lines-with-annotations">Label Lines with Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#the-traces">The traces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#annotation-content">Annotation content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#filled-lines-shaded-lines">Filled lines (shaded lines)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/line-charts.html#this-created-the-shading-part">This created the shading part</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/networkx-demo.html">networkx-demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/pie-charts.html">pie-charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/pie-charts.html#basic-pie-chart">Basic pie chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/pie-charts.html#pie-chart-using-pie-object">Pie Chart using Pie object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/pie-charts.html#donut-chart">Donut Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/pie-charts.html#pie-chart-subplots">Pie Chart Subplots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/range-slider.html">range-slider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/scatter-plots.html">scatter-plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/scatter-plots.html#simple-scatter-plot">Simple scatter plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/scatter-plots.html#line-and-scatter-plots">Line and Scatter Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/scatter-plots.html#style-scatter-plots">Style Scatter Plots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_demos_api/tables.html">tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#simple-table">Simple table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#add-links">Add Links</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#use-latex">Use LaTeX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#use-a-panda-s-dataframe">Use a Panda&#8217;s Dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#include-and-index-column">Include and Index Column</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#custom-table-colors">Custom Table Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#custom-font-colors">Custom Font Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#change-font-size">Change Font Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#tables-with-graphs">Tables with Graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#horizontal-subplots">Horizontal subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_demos_api/tables.html#vertical-subplots">Vertical subplots</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plotly_maps/top-plotly-maps.html">Plotly &#8211; map demos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html">Choropleth Maps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#united-states-choropleth-map">United States Choropleth Map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#define-data-object">Define data object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#define-layout-object">Define layout object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#world-choropleth-map">World choropleth map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#define-data">Define data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#define-layout">Define layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/Choropleth Maps.html#choropleth-inset-map">Choropleth Inset Map</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html">plotly-mapbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#basic-example">Basic Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#define-trace-scattermapbox-object">Define trace (Scattermapbox object)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#define-layout">Define layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#plot">Plot!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#multiple-markers">Multiple Markers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#county-level">County-level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#color-the-counties">Color the Counties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#create-json-files">Create JSON Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#define-data-easy-part">Define data (easy part)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plotly_maps/plotly-mapbox.html#define-layout-hard-part">Define layout (hard part)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">cs110 - Text Analysis and Entity Resolution with TF-IDF</a><ul>
<li><a class="reference internal" href="#preliminaries">Preliminaries</a><ul>
<li><a class="reference internal" href="#background-on-er">Background on ER</a></li>
<li><a class="reference internal" href="#data-files">Data files</a></li>
<li><a class="reference internal" href="#load-data-files">Load data files</a></li>
<li><a class="reference internal" href="#examine-the-lines-loaded">Examine the lines loaded</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part1-er-as-text-similarity-bags-of-words">Part1: ER as Text Similarity - Bags of Words</a><ul>
<li><a class="reference internal" href="#a-tokenize-a-string">1a) Tokenize a String</a></li>
<li><a class="reference internal" href="#b-removing-stopwords">1b) removing stopwords</a></li>
<li><a class="reference internal" href="#c-tokenizing-the-small-datasets">1c) Tokenizing the small datasets</a></li>
<li><a class="reference internal" href="#d-amazon-record-with-the-most-tokens">1d) Amazon record with the most tokens</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part2-er-as-text-similarity-weighted-bag-of-words-using-tf-idf">Part2: ER as Text Similarity - Weighted Bag-of-Words using TF-IDF</a><ul>
<li><a class="reference internal" href="#a-implement-a-tf-function">2a) Implement a TF function</a></li>
<li><a class="reference internal" href="#b-create-a-corpus">2b) Create a corpus</a></li>
<li><a class="reference internal" href="#c-implement-an-idfs-function">2c) Implement an IDFs function</a></li>
<li><a class="reference internal" href="#d-tokens-with-the-smallest-idf">2d) Tokens with the smallest IDF</a></li>
<li><a class="reference internal" href="#e-idf-histogram">2e) IDF Histogram</a></li>
<li><a class="reference internal" href="#f-implement-a-tf-idf-function">2f) Implement a TF-IDF function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-3-er-as-text-similarity-cosine-similarity">Part 3: ER as Text Similarity &#8212; Cosine Similarity</a><ul>
<li><a class="reference internal" href="#a-implement-the-components-of-a-cosinesimilarity-function">3a) Implement the components of a cosineSimilarity function</a></li>
<li><a class="reference internal" href="#b-implement-a-cosinesimilarity-function">3b) Implement a cosineSimilarity function</a></li>
<li><a class="reference internal" href="#c-perform-entity-resolution">3c) Perform Entity Resolution</a></li>
<li><a class="reference internal" href="#d-perform-entity-resolution-with-broadcast-variables">3d) Perform Entity Resolution with Broadcast Variables</a></li>
<li><a class="reference internal" href="#e-perform-a-gold-standard-evaluation">3e) Perform a Gold Standard evaluation</a></li>
<li><a class="reference internal" href="#using-the-gold-standard-data-we-can-answer-the-following-questions">Using the &#8220;gold standard&#8221; data we can answer the following questions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-4-scalable-er">Part 4: Scalable ER</a><ul>
<li><a class="reference internal" href="#inverted-indices">Inverted Indices</a></li>
<li><a class="reference internal" href="#a-tokenize-the-full-dataset">4a) Tokenize the full dataset</a></li>
<li><a class="reference internal" href="#b-compute-idfs-and-tf-idfs-for-the-full-datasets">4b) Compute IDFs and TF-IDFs for the full datasets</a></li>
<li><a class="reference internal" href="#c-compute-norms-for-the-weights-from-the-full-datasets">4c) Compute Norms for the weights from the full datasets</a></li>
<li><a class="reference internal" href="#d-create-inverted-indices-from-the-full-datasets">4d) Create inverted indices from the full datasets</a></li>
<li><a class="reference internal" href="#e-identify-common-tokens-from-the-full-dataset">4e) Identify common tokens from the full dataset</a></li>
<li><a class="reference internal" href="#f-identify-common-tokens-from-the-full-dataset">4f) Identify common tokens from the full dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-5-analysis">Part 5: Analysis</a><ul>
<li><a class="reference internal" href="#a-counting-true-positives-false-positives-and-false-negatives">5a) Counting True Positives, False Positives, and False Negatives</a></li>
<li><a class="reference internal" href="#b-precision-recall-and-f-measures">5b Precision, Recall, and F-measures</a></li>
<li><a class="reference internal" href="#c-line-plots">5c Line Plots</a></li>
</ul>
</li>
<li><a class="reference internal" href="#discussion-of-results">Discussion of results</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <style>
.emph {color:red; font-weight: bold; background-color: yellow;}
</style><div class="section" id="cs110-text-analysis-and-entity-resolution-with-tf-idf">
<span id="cs110-lab3b"></span><h1>cs110 - Text Analysis and Entity Resolution with TF-IDF</h1>
<p><a class="reference external" href="https://raw.githubusercontent.com/spark-mooc/mooc-setup/master/cs110_lab3b_text_analysis_and_entity_resolution.py">https://raw.githubusercontent.com/spark-mooc/mooc-setup/master/cs110_lab3b_text_analysis_and_entity_resolution.py</a></p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This is an actual homework program submitted to EdX. To adhere to the honor code,
the <code class="docutils literal"><span class="pre">&lt;FILL</span> <span class="pre">IN&gt;</span></code> is kept in my personal private <a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst">github repos</a>.</p>
</div>
<div class="contents local topic" id="contents">
<p class="topic-title first"><cite>Contents</cite></p>
<ul class="simple">
<li><a class="reference internal" href="#preliminaries" id="id1">Preliminaries</a><ul>
<li><a class="reference internal" href="#background-on-er" id="id2">Background on ER</a></li>
<li><a class="reference internal" href="#data-files" id="id3">Data files</a></li>
<li><a class="reference internal" href="#load-data-files" id="id4">Load data files</a></li>
<li><a class="reference internal" href="#examine-the-lines-loaded" id="id5">Examine the lines loaded</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part1-er-as-text-similarity-bags-of-words" id="id6">Part1: ER as Text Similarity - Bags of Words</a><ul>
<li><a class="reference internal" href="#a-tokenize-a-string" id="id7">1a) Tokenize a String</a></li>
<li><a class="reference internal" href="#b-removing-stopwords" id="id8">1b) removing stopwords</a></li>
<li><a class="reference internal" href="#c-tokenizing-the-small-datasets" id="id9">1c) Tokenizing the small datasets</a></li>
<li><a class="reference internal" href="#d-amazon-record-with-the-most-tokens" id="id10">1d) Amazon record with the most tokens</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part2-er-as-text-similarity-weighted-bag-of-words-using-tf-idf" id="id11">Part2: ER as Text Similarity - Weighted Bag-of-Words using TF-IDF</a><ul>
<li><a class="reference internal" href="#a-implement-a-tf-function" id="id12">2a) Implement a TF function</a></li>
<li><a class="reference internal" href="#b-create-a-corpus" id="id13">2b) Create a corpus</a></li>
<li><a class="reference internal" href="#c-implement-an-idfs-function" id="id14">2c) Implement an IDFs function</a></li>
<li><a class="reference internal" href="#d-tokens-with-the-smallest-idf" id="id15">2d) Tokens with the smallest IDF</a></li>
<li><a class="reference internal" href="#e-idf-histogram" id="id16">2e) IDF Histogram</a></li>
<li><a class="reference internal" href="#f-implement-a-tf-idf-function" id="id17">2f) Implement a TF-IDF function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-3-er-as-text-similarity-cosine-similarity" id="id18">Part 3: ER as Text Similarity &#8212; Cosine Similarity</a><ul>
<li><a class="reference internal" href="#a-implement-the-components-of-a-cosinesimilarity-function" id="id19">3a) Implement the components of a cosineSimilarity function</a></li>
<li><a class="reference internal" href="#b-implement-a-cosinesimilarity-function" id="id20">3b) Implement a cosineSimilarity function</a></li>
<li><a class="reference internal" href="#c-perform-entity-resolution" id="id21">3c) Perform Entity Resolution</a></li>
<li><a class="reference internal" href="#d-perform-entity-resolution-with-broadcast-variables" id="id22">3d) Perform Entity Resolution with Broadcast Variables</a></li>
<li><a class="reference internal" href="#e-perform-a-gold-standard-evaluation" id="id23">3e) Perform a Gold Standard evaluation</a></li>
<li><a class="reference internal" href="#using-the-gold-standard-data-we-can-answer-the-following-questions" id="id24">Using the &#8220;gold standard&#8221; data we can answer the following questions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-4-scalable-er" id="id25">Part 4: Scalable ER</a><ul>
<li><a class="reference internal" href="#inverted-indices" id="id26">Inverted Indices</a></li>
<li><a class="reference internal" href="#a-tokenize-the-full-dataset" id="id27">4a) Tokenize the full dataset</a></li>
<li><a class="reference internal" href="#b-compute-idfs-and-tf-idfs-for-the-full-datasets" id="id28">4b) Compute IDFs and TF-IDFs for the full datasets</a></li>
<li><a class="reference internal" href="#c-compute-norms-for-the-weights-from-the-full-datasets" id="id29">4c) Compute Norms for the weights from the full datasets</a></li>
<li><a class="reference internal" href="#d-create-inverted-indices-from-the-full-datasets" id="id30">4d) Create inverted indices from the full datasets</a></li>
<li><a class="reference internal" href="#e-identify-common-tokens-from-the-full-dataset" id="id31">4e) Identify common tokens from the full dataset</a></li>
<li><a class="reference internal" href="#f-identify-common-tokens-from-the-full-dataset" id="id32">4f) Identify common tokens from the full dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-5-analysis" id="id33">Part 5: Analysis</a><ul>
<li><a class="reference internal" href="#a-counting-true-positives-false-positives-and-false-negatives" id="id34">5a) Counting True Positives, False Positives, and False Negatives</a></li>
<li><a class="reference internal" href="#b-precision-recall-and-f-measures" id="id35">5b Precision, Recall, and F-measures</a></li>
<li><a class="reference internal" href="#c-line-plots" id="id36">5c Line Plots</a></li>
</ul>
</li>
<li><a class="reference internal" href="#discussion-of-results" id="id37">Discussion of results</a></li>
</ul>
</div>
<div class="section" id="preliminaries">
<h2><a class="toc-backref" href="#id1">Preliminaries</a></h2>
<div class="section" id="background-on-er">
<h3><a class="toc-backref" href="#id2">Background on ER</a></h3>
<ul class="simple">
<li><strong>Entity Resolution (ER)</strong>, or <strong>Record linkage</strong> (<a class="reference external" href="https://en.wikipedia.org/wiki/Record_linkage">wiki</a>) describes the process of joining records from one data source with another that describe the same entity.</li>
<li>Other synonymous terms include:<ul>
<li><strong>&#8220;entity disambiguation/linking&#8221;</strong></li>
<li><strong>&#8220;duplicate detection&#8221;</strong>,</li>
<li><strong>&#8220;deduplication&#8221;</strong>,</li>
<li><strong>&#8220;record matching&#8221;</strong>,</li>
<li><strong>&#8220;(reference) reconciliation&#8221;</strong>,</li>
<li><strong>&#8220;object identification&#8221;</strong>,</li>
<li><strong>&#8220;data/information integration&#8221;</strong>,</li>
<li><strong>&#8220;conflation&#8221;</strong>.</li>
</ul>
</li>
<li>ER refers to the task of finding records in a dataset that refer to the same entity across different data sources (e.g., data files, books, websites, databases).</li>
<li>ER is necessary when joining datasets based on entities that may or may not share a <strong>common identifier</strong> (e.g., database key, URI, National identification number), as may be the case due to differences in record shape, storage location, and/or curator style or preference.</li>
<li>A dataset that has undergone ER may be referred to as being <strong>cross-linked</strong>.</li>
</ul>
</div>
<div class="section" id="data-files">
<h3><a class="toc-backref" href="#id3">Data files</a></h3>
<p><a class="reference external" href="https://github.com/spark-mooc/mooc-setup/tree/master/metric-learning/data/3-amazon-googleproducts">https://github.com/spark-mooc/mooc-setup/tree/master/metric-learning/data/3-amazon-googleproducts</a></p>
<p>The directory contains the following files:</p>
<ul class="simple">
<li><strong>Google.csv</strong>, the Google Products dataset, named as targets.csv in the repository</li>
<li><strong>Amazon.csv</strong>, the Amazon dataset, named as sources.csv in the repository</li>
<li><strong>Google_small.csv</strong>, 200 records sampled from the Google data, subset of targets.csv</li>
<li><strong>Amazon_small.csv</strong>, 200 records sampled from the Amazon data, subset of sources.csv</li>
<li><strong>Amazon_Google_perfectMapping.csv</strong>, the &#8220;gold standard&#8221; mapping, named as mapping.csv in the repository</li>
<li><strong>stopwords.txt</strong>, a list of common English words</li>
</ul>
<p>The &#8220;gold standard&#8221; file contains all of the true mappings between entities in the two datasets.</p>
<ul class="simple">
<li>Every row in the gold standard file has a pair of record IDs (one Google, one Amazon) that belong to two records that describe the same thing in the real world.</li>
<li>We will use the gold standard to evaluate our algorithms.</li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">DATAFILE_PATTERN</span> <span class="o">=</span> <span class="s1">&#39;^(.+),&quot;(.+)&quot;,(.*),(.*),(.*)&#39;</span>

<span class="k">def</span> <span class="nf">removeQuotes</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Remove quotation marks from an input string</span>
<span class="sd">    Args:</span>
<span class="sd">        s (str): input string that might have the quote &quot;&quot; characters</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: a string without the quote characters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="n">i</span><span class="o">!=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">parseDatafileLine</span><span class="p">(</span><span class="n">datafileLine</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Parse a line of the data file using the specified regular expression pattern</span>
<span class="sd">    Args:</span>
<span class="sd">        datafileLine (str): input string that is a line from the data file</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: a string parsed using the given regular expression and without the quote characters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">DATAFILE_PATTERN</span><span class="p">,</span> <span class="n">datafileLine</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span> <span class="s1">&#39;Invalid datafile line: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">datafileLine</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">datafileLine</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;&quot;id&quot;&#39;</span><span class="p">:</span>
        <span class="k">print</span> <span class="s1">&#39;Header datafile line: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">datafileLine</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">datafileLine</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">product</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">removeQuotes</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="n">product</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">_i</span><span class="p">,</span><span class="n">file_info</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/databricks-datasets/cs100/lab3/data-001&#39;</span><span class="p">)):</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">print</span> <span class="n">_i</span><span class="p">,</span><span class="n">file_info</span>
<span class="go">0 FileInfo(path=u&#39;dbfs:/databricks-datasets/cs100/lab3/data-001/Amazon.csv&#39;, name=u&#39;Amazon.csv&#39;, size=1853189L)</span>
<span class="go">1 FileInfo(path=u&#39;dbfs:/databricks-datasets/cs100/lab3/data-001/Amazon_Google_perfectMapping.csv&#39;, name=u&#39;Amazon_Google_perfectMapping.csv&#39;, size=102234L)</span>
<span class="go">2 FileInfo(path=u&#39;dbfs:/databricks-datasets/cs100/lab3/data-001/Amazon_small.csv&#39;, name=u&#39;Amazon_small.csv&#39;, size=155487L)</span>
<span class="go">3 FileInfo(path=u&#39;dbfs:/databricks-datasets/cs100/lab3/data-001/Google.csv&#39;, name=u&#39;Google.csv&#39;, size=1070774L)</span>
<span class="go">4 FileInfo(path=u&#39;dbfs:/databricks-datasets/cs100/lab3/data-001/Google_small.csv&#39;, name=u&#39;Google_small.csv&#39;, size=64413L)</span>
<span class="go">5 FileInfo(path=u&#39;dbfs:/databricks-datasets/cs100/lab3/data-001/stopwords.txt&#39;, name=u&#39;stopwords.txt&#39;, size=622L)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">display</span><span class="p">(</span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/databricks-datasets/cs100/lab3/data-001&#39;</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/cs110_lab3b_pic1.png"><img alt="../_images/cs110_lab3b_pic1.png" class="align-center" src="../_images/cs110_lab3b_pic1.png" style="width: 1278.0px; height: 344.0px;" /></a>
</div>
<div class="section" id="load-data-files">
<h3><a class="toc-backref" href="#id4">Load data files</a></h3>
<p>First define our functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">parseData</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Parse a data file</span>
<span class="sd">    Args:</span>
<span class="sd">        filename (str): input file name of the data file</span>
<span class="sd">    Returns:</span>
<span class="sd">        RDD: a RDD of parsed lines</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">sc</span>
            <span class="o">.</span><span class="n">textFile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">parseDatafileLine</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">loadData</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Load a data file</span>
<span class="sd">    Args:</span>
<span class="sd">        path (str): input file name of the data file</span>
<span class="sd">    Returns:</span>
<span class="sd">        RDD: a RDD of parsed valid lines</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">baseDir</span><span class="p">,</span> <span class="n">inputPath</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">parseData</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">cache</span><span class="p">()</span>
    <span class="n">failed</span> <span class="o">=</span> <span class="p">(</span><span class="n">raw</span>
              <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
              <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">failed</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - Invalid datafile line: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="n">valid</span> <span class="o">=</span> <span class="p">(</span><span class="n">raw</span>
             <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
             <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
             <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
    <span class="k">print</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - Read </span><span class="si">%d</span><span class="s1"> lines, successfully parsed </span><span class="si">%d</span><span class="s1"> lines, failed to parse </span><span class="si">%d</span><span class="s1"> lines&#39;</span> <span class="o">%</span> \
          <span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">raw</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span><span class="n">valid</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span><span class="n">failed</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
    <span class="k">assert</span> <span class="n">failed</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">raw</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="n">valid</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">valid</span>
</pre></div>
</div>
<p>Now load data</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;databricks-datasets&#39;</span><span class="p">,</span> <span class="s1">&#39;cs100&#39;</span><span class="p">,</span> <span class="s1">&#39;lab3&#39;</span><span class="p">,</span> <span class="s1">&#39;data-001&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GOOGLE_PATH</span> <span class="o">=</span> <span class="s1">&#39;Google.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GOOGLE_SMALL_PATH</span> <span class="o">=</span> <span class="s1">&#39;Google_small.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AMAZON_PATH</span> <span class="o">=</span> <span class="s1">&#39;Amazon.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AMAZON_SMALL_PATH</span> <span class="o">=</span> <span class="s1">&#39;Amazon_small.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GOLD_STANDARD_PATH</span> <span class="o">=</span> <span class="s1">&#39;Amazon_Google_perfectMapping.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">STOPWORDS_PATH</span> <span class="o">=</span> <span class="s1">&#39;stopwords.txt&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleSmall</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">GOOGLE_SMALL_PATH</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">google</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">GOOGLE_PATH</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonSmall</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">AMAZON_SMALL_PATH</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazon</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">AMAZON_PATH</span><span class="p">)</span>
<span class="go">(32) Spark Jobs</span>
<span class="go">Google_small.csv - Read 201 lines, successfully parsed 200 lines, failed to parse 0 lines</span>
<span class="go">Google.csv - Read 3227 lines, successfully parsed 3226 lines, failed to parse 0 lines</span>
<span class="go">Amazon_small.csv - Read 201 lines, successfully parsed 200 lines, failed to parse 0 lines</span>
<span class="go">Amazon.csv - Read 1364 lines, successfully parsed 1363 lines, failed to parse 0 lines</span>
<span class="go">Command took 4.14s</span>
</pre></div>
</div>
</div>
<div class="section" id="examine-the-lines-loaded">
<h3><a class="toc-backref" href="#id5">Examine the lines loaded</a></h3>
<p>We read in each of the files and create an RDD consisting of lines.</p>
<ul class="simple">
<li>For each of the data files (&#8220;Google.csv&#8221;, &#8220;Amazon.csv&#8221;, and the samples), we want to <strong>parse the IDs out of each record</strong>.</li>
<li>The IDs are the first column of the file (they are URLs for Google, and alphanumeric strings for Amazon).</li>
<li>Omitting the headers, we load these data files into <strong>pair RDDs</strong> where:<ul>
<li><code class="docutils literal"><span class="pre">key</span></code> = the <strong>mapping ID</strong></li>
<li><code class="docutils literal"><span class="pre">value</span></code> = a string consisting of the name/title, description, and manufacturer from the record.</li>
</ul>
</li>
</ul>
<p>The file format of an Amazon line is:
<code class="docutils literal"><span class="pre">&quot;id&quot;,&quot;title&quot;,&quot;description&quot;,&quot;manufacturer&quot;,&quot;price&quot;</span></code></p>
<p>The file format of a Google line is:
<code class="docutils literal"><span class="pre">&quot;id&quot;,&quot;name&quot;,&quot;description&quot;,&quot;manufacturer&quot;,&quot;price&quot;</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">googleSmall</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="s1">&#39;google: </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">google: http://www.google.com/base/feeds/snippets/11448761432933644608: spanish vocabulary builder &quot;expand your vocabulary! contains fun lessons that both teach and entertain you&#39;ll quickly find yourself mastering new terms. includes games and more!&quot;</span>
<span class="go">google: http://www.google.com/base/feeds/snippets/8175198959985911471: topics presents: museums of world &quot;5 cd-rom set. step behind the velvet rope to examine some of the most treasured collections of antiquities art and inventions. includes the following the louvre - virtual visit 25 rooms in full screen interactive video detailed map of the louvre ...&quot;</span>
<span class="go">google: http://www.google.com/base/feeds/snippets/18445827127704822533: sierrahome hse hallmark card studio special edition win 98 me 2000 xp &quot;hallmark card studio special edition (win 98 me 2000 xp)&quot; &quot;sierrahome&quot;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">amazonSmall</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="s1">&#39;amazon: </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">amazon: b000jz4hqo: clickart 950 000 - premier image pack (dvd-rom)  &quot;broderbund&quot;</span>
<span class="go">amazon: b0006zf55o: ca international - arcserve lap/desktop oem 30pk &quot;oem arcserve backup v11.1 win 30u for laptops and desktops&quot; &quot;computer associates&quot;</span>
<span class="go">amazon: b00004tkvy: noah&#39;s ark activity center (jewel case ages 3-8)  &quot;victory multimedia&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="part1-er-as-text-similarity-bags-of-words">
<h2><a class="toc-backref" href="#id6">Part1: ER as Text Similarity - Bags of Words</a></h2>
<p>A simple approach to ER is to <strong>treat all records as strings</strong> and compute their similarity with a <strong>string distance function</strong>.</p>
<ul class="simple">
<li>In this part, we will build some components for performing <strong>bag-of-words text-analysis</strong>, and then use them to compute <strong>record similarity</strong>.</li>
<li>Bag-of-words is a conceptually simple yet powerful approach to text analysis.</li>
<li>The idea is to treat strings, a.k.a. <strong>documents</strong>, as <em>unordered collections of words</em>, or <strong>tokens</strong>, i.e., as bags of words.</li>
</ul>
<div class="admonition-note-on-terminology admonition">
<p class="first admonition-title">Note on terminology</p>
<ul class="last simple">
<li>a &#8220;<strong>token</strong>&#8221; is the result of parsing the document down to the elements we consider &#8220;<strong>atomic</strong>&#8221; for the task at hand.<ul>
<li>Tokens can be things like words, numbers, acronyms, or other exotica like word-roots or fixed-length character strings.</li>
</ul>
</li>
<li>Bag of words techniques all apply to any sort of token, so when we say &#8220;<strong>bag-of-words</strong>&#8221; we really mean &#8220;<strong>bag-of-tokens</strong>,&#8221; strictly speaking.</li>
<li><strong>Tokens</strong> become the atomic unit of text comparison.<ul>
<li><strong>To compare two documents</strong>, we count how many tokens they share in common.</li>
<li><strong>To search for documents</strong> with keyword queries (what Google does), then we <em>turn the keywords into tokens</em> and find documents that contain them.</li>
</ul>
</li>
<li>The power of this approach is that it <strong>makes string comparisons insensitive to small differences</strong> that probably do not affect meaning much, for example, punctuation and word order.</li>
</ul>
</div>
<div class="section" id="a-tokenize-a-string">
<h3><a class="toc-backref" href="#id7">1a) Tokenize a String</a></h3>
<ul class="simple">
<li>Note that <code class="docutils literal"><span class="pre">\W</span></code> includes the &#8220;<code class="docutils literal"><span class="pre">_</span></code>&#8221; character.</li>
<li>You should use <code class="docutils literal"><span class="pre">re.split()</span></code> to perform the string split.</li>
<li>Also:<ul>
<li>make sure you remove any empty tokens</li>
<li>make sure you convert the string to lower case.</li>
</ul>
</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-1-a-tokenize-a-string">solution</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quickbrownfox</span> <span class="o">=</span> <span class="s1">&#39;A quick brown fox jumps over the lazy dog.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_regex</span> <span class="o">=</span> <span class="s1">r&#39;\W+&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">simpleTokenize</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; A simple implementation of input string tokenization</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        string (str): input string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        list: a list of tokens</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">simpleTokenize</span><span class="p">(</span><span class="n">quickbrownfox</span><span class="p">)</span> <span class="c1"># Should give [&#39;a&#39;, &#39;quick&#39;, &#39;brown&#39;, ... ]</span>
<span class="go">[&#39;a&#39;, &#39;quick&#39;, &#39;brown&#39;, &#39;fox&#39;, &#39;jumps&#39;, &#39;over&#39;, &#39;the&#39;, &#39;lazy&#39;, &#39;dog&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># TEST Tokenize a String (1a)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">simpleTokenize</span><span class="p">(</span><span class="n">quickbrownfox</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;quick&#39;</span><span class="p">,</span><span class="s1">&#39;brown&#39;</span><span class="p">,</span><span class="s1">&#39;fox&#39;</span><span class="p">,</span><span class="s1">&#39;jumps&#39;</span><span class="p">,</span><span class="s1">&#39;over&#39;</span><span class="p">,</span><span class="s1">&#39;the&#39;</span><span class="p">,</span><span class="s1">&#39;lazy&#39;</span><span class="p">,</span><span class="s1">&#39;dog&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;simpleTokenize should handle sample text&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">simpleTokenize</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="p">[],</span> <span class="s1">&#39;simpleTokenize should handle empty string&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">simpleTokenize</span><span class="p">(</span><span class="s1">&#39;!!!!123A/456_B/789C.123A&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;123a&#39;</span><span class="p">,</span><span class="s1">&#39;456_b&#39;</span><span class="p">,</span><span class="s1">&#39;789c&#39;</span><span class="p">,</span><span class="s1">&#39;123a&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;simpleTokenize should handle punctuations and lowercase result&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">simpleTokenize</span><span class="p">(</span><span class="s1">&#39;fox fox&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;fox&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;simpleTokenize should not remove duplicates&#39;</span><span class="p">)</span>
<span class="go">1 test passed.</span>
<span class="go">1 test passed.</span>
<span class="go">1 test passed.</span>
<span class="go">1 test passed.</span>
</pre></div>
</div>
</div>
<div class="section" id="b-removing-stopwords">
<h3><a class="toc-backref" href="#id8">1b) removing stopwords</a></h3>
<p><strong>Stopwords</strong> (<a class="reference external" href="https://en.wikipedia.org/wiki/Stop_words">wiki</a>) &#8212; words that do not contribute much to the content or meaning of a document (e.g., &#8220;the&#8221;, &#8220;a&#8221;, &#8220;is&#8221;, &#8220;to&#8221;, etc.).</p>
<p>Using the included file &#8220;<code class="docutils literal"><span class="pre">stopwords.txt</span></code>&#8221;, implement <code class="docutils literal"><span class="pre">tokenize</span></code>, an improved tokenizer that does not emit stopwords.</p>
<div class="admonition-hints admonition">
<p class="first admonition-title">hints</p>
<p class="rubric">hint1</p>
<p>Test membership as follows</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">my_set</span>     <span class="c1"># returns True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;d&#39;</span> <span class="ow">in</span> <span class="n">my_set</span>     <span class="c1"># returns False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">my_set</span> <span class="c1"># returns False</span>
</pre></div>
</div>
<p class="rubric">hint2</p>
<ul class="last simple">
<li>Within <code class="docutils literal"><span class="pre">tokenize()</span></code>:<ul>
<li>first tokenize the string using <code class="docutils literal"><span class="pre">simpleTokenize()</span></code></li>
<li>Then, remove stopwords.</li>
</ul>
</li>
<li>To remove stop words, consider using a loop, a Python list comprehension, or the built-in Python <code class="docutils literal"><span class="pre">filter()</span></code> function</li>
</ul>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stopfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">STOPWORDS_PATH</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stopwords</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">textFile</span><span class="p">(</span><span class="n">stopfile</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;These are the stopwords: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">stopwords</span>
<span class="go">These are the stopwords: set([u&#39;all&#39;, u&#39;just&#39;, u&#39;being&#39;, u&#39;over&#39;, u&#39;both&#39;, u&#39;through&#39;, u&#39;yourselves&#39;, u&#39;its&#39;, u&#39;before&#39;, u&#39;with&#39;, u&#39;had&#39;, u&#39;should&#39;, u&#39;to&#39;, u&#39;only&#39;, u&#39;under&#39;, u&#39;ours&#39;, u&#39;has&#39;, u&#39;do&#39;, u&#39;them&#39;, u&#39;his&#39;, u&#39;very&#39;, u&#39;they&#39;, u&#39;not&#39;, u&#39;during&#39;, u&#39;now&#39;, u&#39;him&#39;, u&#39;nor&#39;, u&#39;did&#39;, u&#39;these&#39;, u&#39;t&#39;, u&#39;each&#39;, u&#39;where&#39;, u&#39;because&#39;, u&#39;doing&#39;, u&#39;theirs&#39;, u&#39;some&#39;, u&#39;are&#39;, u&#39;our&#39;, u&#39;ourselves&#39;, u&#39;out&#39;, u&#39;what&#39;, u&#39;for&#39;, u&#39;below&#39;, u&#39;does&#39;, u&#39;above&#39;, u&#39;between&#39;, u&#39;she&#39;, u&#39;be&#39;, u&#39;we&#39;, u&#39;after&#39;, u&#39;here&#39;, u&#39;hers&#39;, u&#39;by&#39;, u&#39;on&#39;, u&#39;about&#39;, u&#39;of&#39;, u&#39;against&#39;, u&#39;s&#39;, u&#39;or&#39;, u&#39;own&#39;, u&#39;into&#39;, u&#39;yourself&#39;, u&#39;down&#39;, u&#39;your&#39;, u&#39;from&#39;, u&#39;her&#39;, u&#39;whom&#39;, u&#39;there&#39;, u&#39;been&#39;, u&#39;few&#39;, u&#39;too&#39;, u&#39;themselves&#39;, u&#39;was&#39;, u&#39;until&#39;, u&#39;more&#39;, u&#39;himself&#39;, u&#39;that&#39;, u&#39;but&#39;, u&#39;off&#39;, u&#39;herself&#39;, u&#39;than&#39;, u&#39;those&#39;, u&#39;he&#39;, u&#39;me&#39;, u&#39;myself&#39;, u&#39;this&#39;, u&#39;up&#39;, u&#39;will&#39;, u&#39;while&#39;, u&#39;can&#39;, u&#39;were&#39;, u&#39;my&#39;, u&#39;and&#39;, u&#39;then&#39;, u&#39;is&#39;, u&#39;in&#39;, u&#39;am&#39;, u&#39;it&#39;, u&#39;an&#39;, u&#39;as&#39;, u&#39;itself&#39;, u&#39;at&#39;, u&#39;have&#39;, u&#39;further&#39;, u&#39;their&#39;, u&#39;if&#39;, u&#39;again&#39;, u&#39;no&#39;, u&#39;when&#39;, u&#39;same&#39;, u&#39;any&#39;, u&#39;how&#39;, u&#39;other&#39;, u&#39;which&#39;, u&#39;you&#39;, u&#39;who&#39;, u&#39;most&#39;, u&#39;such&#39;, u&#39;why&#39;, u&#39;a&#39;, u&#39;don&#39;, u&#39;i&#39;, u&#39;having&#39;, u&#39;so&#39;, u&#39;the&#39;, u&#39;yours&#39;, u&#39;once&#39;])</span>
</pre></div>
</div>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-1b-removing-stopwords">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">tokenize</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; An implementation of input string tokenization that excludes stopwords</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        string (str): input string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        list: a list of tokens without stopwords</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">tokenize</span><span class="p">(</span><span class="n">quickbrownfox</span><span class="p">)</span> <span class="c1"># Should give [&#39;quick&#39;, &#39;brown&#39;, ... ]</span>
<span class="go">[&#39;quick&#39;, &#39;brown&#39;, &#39;fox&#39;, &#39;jumps&#39;, &#39;lazy&#39;, &#39;dog&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># TEST Removing stopwords (1b)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">tokenize</span><span class="p">(</span><span class="s2">&quot;Why a the?&quot;</span><span class="p">),</span> <span class="p">[],</span> <span class="s1">&#39;tokenize should remove all stopwords&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">tokenize</span><span class="p">(</span><span class="s2">&quot;Being at the_?&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;the_&#39;</span><span class="p">],</span> <span class="s1">&#39;tokenize should handle non-stopwords&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Test</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">tokenize</span><span class="p">(</span><span class="n">quickbrownfox</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;quick&#39;</span><span class="p">,</span><span class="s1">&#39;brown&#39;</span><span class="p">,</span><span class="s1">&#39;fox&#39;</span><span class="p">,</span><span class="s1">&#39;jumps&#39;</span><span class="p">,</span><span class="s1">&#39;lazy&#39;</span><span class="p">,</span><span class="s1">&#39;dog&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="s1">&#39;tokenize should handle sample text&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="c-tokenizing-the-small-datasets">
<h3><a class="toc-backref" href="#id9">1c) Tokenizing the small datasets</a></h3>
<p>Now let&#8217;s tokenize the two small datasets.</p>
<ul class="simple">
<li>For each ID in a dataset, tokenize the values, and then count the total number of tokens.</li>
<li>The resulting RDDs, <code class="docutils literal"><span class="pre">amazonRecToToken</span></code> and <code class="docutils literal"><span class="pre">googleRecToToken</span></code> should be collections of <code class="docutils literal"><span class="pre">(recordID,</span> <span class="pre">[token_list])</span></code> pairs.</li>
<li>For instance, here&#8217;s a record that should be found in the resulting amazonRecToToken RDD:<ul>
<li><code class="docutils literal"><span class="pre">('b00004tkvy',</span> <span class="pre">['noah',</span> <span class="pre">'ark',</span> <span class="pre">'activity',</span> <span class="pre">'center',</span> <span class="pre">'jewel',</span> <span class="pre">'case',</span> <span class="pre">'ages',</span> <span class="pre">'3',</span> <span class="pre">'8',</span> <span class="pre">'victory',</span> <span class="pre">'multimedia'])</span></code></li>
</ul>
</li>
<li>How many tokens, total, are there in the two datasets?</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-1c-tokenizing-the-small-datasets">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonRecToToken</span> <span class="o">=</span> <span class="n">amazonSmall</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleRecToToken</span> <span class="o">=</span> <span class="n">googleSmall</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">countTokens</span><span class="p">(</span><span class="n">vendorRDD</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Count and return the number of tokens</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        vendorRDD (RDD of (recordId, tokenizedValue)): Pair tuple of record ID to tokenized output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        count: count of all tokens</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalTokens</span> <span class="o">=</span> <span class="n">countTokens</span><span class="p">(</span><span class="n">amazonRecToToken</span><span class="p">)</span> <span class="o">+</span> <span class="n">countTokens</span><span class="p">(</span><span class="n">googleRecToToken</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> tokens in the combined datasets&#39;</span> <span class="o">%</span> <span class="n">totalTokens</span>
<span class="go">There are 22520 tokens in the combined datasets</span>
</pre></div>
</div>
</div>
<div class="section" id="d-amazon-record-with-the-most-tokens">
<h3><a class="toc-backref" href="#id10">1d) Amazon record with the most tokens</a></h3>
<ul class="simple">
<li>Which Amazon record has the biggest number of tokens?</li>
<li>In other words, you want to sort the records and get the one with the largest count of tokens.</li>
</ul>
<p>Hint: The RDD <code class="docutils literal"><span class="pre">takeOrdered()</span></code> (<a class="reference external" href="https://wtak23.github.io/pyspark/generated/generated/pyspark.RDD.takeOrdered.html">link</a>) transformation may be of some help here.</p>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-1d-amazon-record-with-the-most-tokens">solution</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">findBiggestRecord</span><span class="p">(</span><span class="n">vendorRDD</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Find and return the record with the largest number of tokens</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        vendorRDD (RDD of (recordId, tokens)): input Pair Tuple of record ID and tokens</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        list: a list of 1 Pair Tuple of record ID and tokens</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">biggestRecordAmazon</span> <span class="o">=</span> <span class="n">findBiggestRecord</span><span class="p">(</span><span class="n">amazonRecToToken</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;The Amazon record with ID &quot;</span><span class="si">%s</span><span class="s1">&quot; has the most tokens (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">biggestRecordAmazon</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                                                                   <span class="nb">len</span><span class="p">(</span><span class="n">biggestRecordAmazon</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="part2-er-as-text-similarity-weighted-bag-of-words-using-tf-idf">
<h2><a class="toc-backref" href="#id11">Part2: ER as Text Similarity - Weighted Bag-of-Words using TF-IDF</a></h2>
<ul class="simple">
<li>Bag-of-words comparisons are not very good when all tokens are treated the same: some tokens are more important than others.</li>
<li>Weights give us a way to specify which tokens to favor.</li>
<li>A good heuristic for assigning weights is called <em>Term-Frequency/Inverse-Document-Frequency</em> (<a class="reference external" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF-IDF</a>).</li>
<li>TF = freqeuncy of a token in a document<ul>
<li>if a document d contains 100 tokens and token t appears in d 5 times, then the <strong>TF weight of t in d</strong> is <span class="math">\(\text{TF}(t,d) = 5/100 = 1/20\)</span></li>
<li>intuitively, frequently used word is more important to the meaning of the document.</li>
<li>it is a <strong>local</strong> weight (depends on both the token and document)</li>
</ul>
</li>
<li><strong>IDF</strong> rewards tokens that are rare <strong>overall</strong> in a document.<ul>
<li>the intuition is that it is more significant if two documents share a rare word than a common one.</li>
<li>it is a <strong>global</strong> weight (only depends on the token <em>t</em>)</li>
<li>Let <em>U</em> = set of documents and <em>N</em> = number of documents in <em>U</em></li>
<li>Let <span class="math">\(n(t)\)</span> = the number of documents in <em>U</em> that contain token <em>t</em></li>
<li>Then: <span class="math">\(\text{IDF}(t) = N/n(t)\)</span> (note: <span class="math">\(n(t)/N\)</span> is the frequency of <em>t</em> in <em>U</em>)</li>
</ul>
</li>
</ul>
<div class="math">
\[\text{TF-IDF}(t,d) = \text{TF}(t,d)\cdot\text{IDF}(t)\]</div>
<div class="section" id="a-implement-a-tf-function">
<h3><a class="toc-backref" href="#id12">2a) Implement a TF function</a></h3>
<p>Implement <code class="docutils literal"><span class="pre">tf(tokens)</span></code> (<strong>input</strong>: a list of tokens, <strong>output</strong> dictionary mapping tokens to TF weights)</p>
<p>The steps your function should perform are:</p>
<ul class="simple">
<li>Create an empty Python dictionary</li>
<li>For each <code class="docutils literal"><span class="pre">tokens</span></code> in the input list, count 1 for each occurrence and add the token to the dictionary</li>
<li>For each <code class="docutils literal"><span class="pre">tokens</span></code> in the dictionary, divide the token&#8217;s count by the total number of tokens in the input <code class="docutils literal"><span class="pre">tokens</span></code> list</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-2a-implement-a-tf-function">solution</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">tf</span><span class="p">(</span><span class="n">tokens</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute TF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        tokens (list of str): input list of tokens from tokenize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        dictionary: a dictionary of tokens to its TF values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">tf</span><span class="p">(</span><span class="n">tokenize</span><span class="p">(</span><span class="n">quickbrownfox</span><span class="p">))</span> <span class="c1"># Should give { &#39;quick&#39;: 0.1666 ... }</span>
<span class="go">{&#39;brown&#39;: 0.16666666666666666, &#39;lazy&#39;: 0.16666666666666666, &#39;jumps&#39;: 0.16666666666666666, &#39;fox&#39;: 0.16666666666666666, &#39;dog&#39;: 0.16666666666666666, &#39;quick&#39;: 0.16666666666666666}</span>
</pre></div>
</div>
</div>
<div class="section" id="b-create-a-corpus">
<h3><a class="toc-backref" href="#id13">2b) Create a corpus</a></h3>
<ul class="simple">
<li>Create a <strong>pair RDD</strong> called <code class="docutils literal"><span class="pre">corpusRDD</span></code>, consisting of a combination of the two small datasets, <code class="docutils literal"><span class="pre">amazonRecToToken</span></code> and <code class="docutils literal"><span class="pre">googleRecToToken</span></code>.</li>
<li>Each element of the <code class="docutils literal"><span class="pre">corpusRDD</span></code> should be a <strong>pair</strong> consisting of a <code class="docutils literal"><span class="pre">key</span></code> from one of the small datasets (<strong>ID or URL</strong>) and the <code class="docutils literal"><span class="pre">value</span></code> is the associated value for that key from the small datasets.</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-2b-create-a-corpus">solution</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpusRDD</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">corpusRDD</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">(2) Spark Jobs</span>
<span class="go">(&#39;b000jz4hqo&#39;, [&#39;clickart&#39;, &#39;950&#39;, &#39;000&#39;, &#39;premier&#39;, &#39;image&#39;, &#39;pack&#39;, &#39;dvd&#39;, &#39;rom&#39;, &#39;broderbund&#39;])</span>
<span class="go">(&#39;b0006zf55o&#39;, [&#39;ca&#39;, &#39;international&#39;, &#39;arcserve&#39;, &#39;lap&#39;, &#39;desktop&#39;, &#39;oem&#39;, &#39;30pk&#39;, &#39;oem&#39;, &#39;arcserve&#39;, &#39;backup&#39;, &#39;v11&#39;, &#39;1&#39;, &#39;win&#39;, &#39;30u&#39;, &#39;laptops&#39;, &#39;desktops&#39;, &#39;computer&#39;, &#39;associates&#39;])</span>
<span class="go">(&#39;b00004tkvy&#39;, [&#39;noah&#39;, &#39;ark&#39;, &#39;activity&#39;, &#39;center&#39;, &#39;jewel&#39;, &#39;case&#39;, &#39;ages&#39;, &#39;3&#39;, &#39;8&#39;, &#39;victory&#39;, &#39;multimedia&#39;])</span>
</pre></div>
</div>
</div>
<div class="section" id="c-implement-an-idfs-function">
<h3><a class="toc-backref" href="#id14">2c) Implement an IDFs function</a></h3>
<ul class="simple">
<li>Implement <code class="docutils literal"><span class="pre">idfs</span></code> that assigns an IDF weight to every unique token in an RDD called <code class="docutils literal"><span class="pre">corpus</span></code>.</li>
<li>The function should return a pair RDD where the <code class="docutils literal"><span class="pre">key</span></code> is the <strong>unique token</strong> and <code class="docutils literal"><span class="pre">value</span></code> is the <strong>IDF weight</strong> for the token.</li>
<li>The steps your function should perform are:<ul>
<li>Calculate N (total number of documents in U). Think about how you can calculate N from the input RDD.</li>
<li>Create an <code class="docutils literal"><span class="pre">RDD</span></code> (not a pair RDD) containing the <strong>unique tokens</strong> from each document in the input corpus. For each document, you should only include a token once, <em>even if it appears multiple times in that document</em>.</li>
<li>For each of the unique tokens, <strong>count how many documents it appears in</strong> and then compute the <em>IDF</em> for that token: <span class="math">\(N/n(t)\)</span></li>
</ul>
</li>
<li>Use your idfs to compute the IDF weights for all tokens in <code class="docutils literal"><span class="pre">corpusRDD</span></code> (the combined small datasets).</li>
<li>How many unique tokens are there?</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-2c-implement-an-idfs-function">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">idfs</span><span class="p">(</span><span class="n">corpus</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute IDF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        corpus (RDD): input corpus</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        RDD: a RDD of (token, IDF value)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">uniqueTokens</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tokenCountPairTuple</span> <span class="o">=</span> <span class="n">uniqueTokens</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tokenSumPairTuple</span> <span class="o">=</span> <span class="n">tokenCountPairTuple</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">N</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">tokenSumPairTuple</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsSmall</span> <span class="o">=</span> <span class="n">idfs</span><span class="p">(</span><span class="n">amazonRecToToken</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">googleRecToToken</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uniqueTokenCount</span> <span class="o">=</span> <span class="n">idfsSmall</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> unique tokens in the small datasets.&#39;</span> <span class="o">%</span> <span class="n">uniqueTokenCount</span>
<span class="go">There are 4772 unique tokens in the small datasets.</span>
</pre></div>
</div>
</div>
<div class="section" id="d-tokens-with-the-smallest-idf">
<h3><a class="toc-backref" href="#id15">2d) Tokens with the smallest IDF</a></h3>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-2d-tokens-with-the-smallest-idf">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">smallIDFTokens</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL_IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">smallIDFTokens</span>
<span class="go">[(&#39;software&#39;, 4.25531914893617), (&#39;new&#39;, 6.896551724137931), (&#39;features&#39;, 6.896551724137931), (&#39;use&#39;, 7.017543859649122), (&#39;complete&#39;, 7.2727272727272725), (&#39;easy&#39;, 7.6923076923076925), (&#39;create&#39;, 8.333333333333334), (&#39;system&#39;, 8.333333333333334), (&#39;cd&#39;, 8.333333333333334), (&#39;1&#39;, 8.51063829787234), (&#39;windows&#39;, 8.51063829787234)]</span>
</pre></div>
</div>
</div>
<div class="section" id="e-idf-histogram">
<h3><a class="toc-backref" href="#id16">2e) IDF Histogram</a></h3>
<p>Plot a histogram of IDF values. Be sure to use appropriate scaling and bucketing for the data.</p>
<p>First plot the histogram using matplotlib.</p>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-2e-idf-histogram">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL_IN&gt; with the appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">small_idf_values</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL_IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL_IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.&lt;</span><span class="n">FILL_IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/lab3b_2e_hist1.png"><img alt="../_images/lab3b_2e_hist1.png" class="align-center" src="../_images/lab3b_2e_hist1.png" style="width: 800.0px; height: 600.0px;" /></a>
<p>Next, plot the histogram using the Databricks`` display()`` function. After the cell runs, click on Plot Options and select Histogram.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># TODO: Replace &lt;FILL_IN&gt; with the appropriate code</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>

<span class="c1"># Create a DataFrame and visualize using display()</span>
<span class="n">idfsToCountRow</span> <span class="o">=</span> <span class="n">idfsSmall</span><span class="o">.&lt;</span><span class="n">FILL_IN</span><span class="o">&gt;</span>
<span class="n">idfsToCountDF</span> <span class="o">=</span> <span class="n">sqlContext</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">idfsToCountRow</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">idfsToCountDF</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/lab3b_2e_hist2.png"><img alt="../_images/lab3b_2e_hist2.png" class="align-center" src="../_images/lab3b_2e_hist2.png" style="width: 726.0px; height: 444.0px;" /></a>
</div>
<div class="section" id="f-implement-a-tf-idf-function">
<h3><a class="toc-backref" href="#id17">2f) Implement a TF-IDF function</a></h3>
<p>Use your <code class="docutils literal"><span class="pre">tf</span></code> function to implement a <code class="docutils literal"><span class="pre">tfidf(tokens,</span> <span class="pre">idfs)</span></code> function</p>
<ul class="simple">
<li><strong>Input</strong>: list of tokens from a document, <code class="docutils literal"><span class="pre">dict</span></code> of IDF weights and</li>
<li><strong>Output</strong>: dict mapping individual tokens to total TF-IDF weights</li>
</ul>
<p>The steps your function should perform are:</p>
<ul class="simple">
<li>Calculate the token frequencies (TF) for <code class="docutils literal"><span class="pre">tokens</span></code></li>
<li>Create a <code class="docutils literal"><span class="pre">dict</span></code> where each token maps to the token&#8217;s frequency times the token&#8217;s IDF weight</li>
<li>Use your <code class="docutils literal"><span class="pre">tfidf</span></code> function to compute the weights of Amazon product record &#8216;b000hkgj8k&#8217;.</li>
<li>To do this, we need to extract the record for the token from the tokenized small Amazon dataset and we need to convert the IDFs for the small dataset into a dict.<ul>
<li>We can do the <strong>first part</strong>, by using a <code class="docutils literal"><span class="pre">filter()</span></code> transformation to extract the matching record and a <code class="docutils literal"><span class="pre">collect()</span></code> action to return the value to the driver.</li>
<li>For the <strong>second part</strong>, we use the <code class="docutils literal"><span class="pre">collectAsMap()</span></code> action to return the IDFs to the driver as a dict.</li>
</ul>
</li>
<li><a class="reference external" href="https://wtak23.github.io/pyspark/generated/generated/pyspark.RDD.collectAsMap.html">https://wtak23.github.io/pyspark/generated/generated/pyspark.RDD.collectAsMap.html</a></li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-2f-implement-a-tf-idf-function">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">tfidf</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">idfs</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute TF-IDF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        tokens (list of str): input list of tokens from tokenize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        idfs (dictionary): record to IDF value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        dictionary: a dictionary of records to TF-IDF values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tfs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tfIdfDict</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">tfIdfDict</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recb000hkgj8k</span> <span class="o">=</span> <span class="n">amazonRecToToken</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;b000hkgj8k&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsSmallWeights</span> <span class="o">=</span> <span class="n">idfsSmall</span><span class="o">.</span><span class="n">collectAsMap</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec_b000hkgj8k_weights</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">(</span><span class="n">recb000hkgj8k</span><span class="p">,</span> <span class="n">idfsSmallWeights</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recb000jz4hqo</span> <span class="o">=</span> <span class="n">amazonRecToToken</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;b000jz4hqo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec_b000jz4hqo_weights</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">(</span><span class="n">recb000jz4hqo</span><span class="p">,</span> <span class="n">idfsSmallWeights</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Amazon record &quot;b000hkgj8k&quot; has tokens and weights:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rec_b000hkgj8k_weights</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Amazon record &quot;b000jz4hqo&quot; has tokens and weights: </span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rec_b000jz4hqo_weights</span>
<span class="go">(3) Spark Jobs</span>
<span class="go">Amazon record &quot;b000hkgj8k&quot; has tokens and weights:</span>
<span class="go">{&#39;autocad&#39;: 33.33333333333333, &#39;autodesk&#39;: 8.333333333333332, &#39;courseware&#39;: 66.66666666666666, &#39;psg&#39;: 33.33333333333333, &#39;2007&#39;: 3.5087719298245617, &#39;customizing&#39;: 16.666666666666664, &#39;interface&#39;: 3.0303030303030303}</span>
<span class="go">Amazon record &quot;b000jz4hqo&quot; has tokens and weights:</span>
<span class="go">{&#39;rom&#39;: 1.8518518518518519, &#39;clickart&#39;: 22.22222222222222, &#39;950&#39;: 44.44444444444444, &#39;image&#39;: 4.040404040404041, &#39;premier&#39;: 11.11111111111111, &#39;000&#39;: 4.444444444444445, &#39;dvd&#39;: 1.7777777777777777, &#39;broderbund&#39;: 22.22222222222222, &#39;pack&#39;: 3.4188034188034186}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="part-3-er-as-text-similarity-cosine-similarity">
<h2><a class="toc-backref" href="#id18">Part 3: ER as Text Similarity &#8212; Cosine Similarity</a></h2>
<ul class="simple">
<li>Now we are ready to do <strong>text comparisons</strong> in a formal way.</li>
<li>The <strong>metric of string distance</strong> we will use is called cosine similarity (<a class="reference external" href="https://en.wikipedia.org/wiki/Cosine_similarity">wiki</a>).<ul>
<li>We will treat each document as a vector in some high dimensional space.</li>
<li>Then, to compare two documents we compute the cosine of the angle between their two document vectors.</li>
</ul>
</li>
<li>The first question to answer is <em>how do we represent documents as vectors</em>?<ul>
<li>The answer is familiar: <strong>bag-of-words</strong>!</li>
</ul>
</li>
<li>We <strong>treat each unique token as a dimension</strong>, and <strong>treat token weights</strong> as magnitudes in their respective token dimensions.</li>
</ul>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p class="last">For example, suppose we use simple counts as weights, and we want to interpret the string &#8220;Hello, world! Goodbye, world!&#8221; as a vector. Then in the &#8220;hello&#8221; and &#8220;goodbye&#8221; dimensions the vector has value 1, in the &#8220;world&#8221; dimension it has value 2, and it is zero in all other dimensions.</p>
</div>
<div class="math">
\[a \cdot b = \| a \| \| b \| \cos \theta\]\[\text{similarity} = \cos \theta = \frac{a \cdot b}{\|a\| \|b\|} = \frac{\sum a_i b_i}{\sqrt{\sum a_i^2} \sqrt{\sum b_i^2}}\]</div>
<div class="section" id="a-implement-the-components-of-a-cosinesimilarity-function">
<h3><a class="toc-backref" href="#id19">3a) Implement the components of a cosineSimilarity function</a></h3>
<p>Implement the <strong>components</strong> of a <code class="docutils literal"><span class="pre">cosineSimilarity</span></code> function.</p>
<p>Use the <code class="docutils literal"><span class="pre">tokenize</span></code> and <code class="docutils literal"><span class="pre">tfidf</span></code> functions, and the IDF weights from Part 2 for extracting tokens and assigning them weights.</p>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#excercise-3a-implement-the-components-of-a-cosinesimilarity-function">solution</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">dotprod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute dot product</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        a (dictionary): first dictionary of record to value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        b (dictionary): second dictionary of record to value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        dotProd: result of the dot product with the two input dictionaries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">norm</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute square root of the dot product</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        a (dictionary): a dictionary of record to value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        norm (float): the square root of the dot product value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">cossim</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute cosine similarity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        a (dictionary): first dictionary of record to value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        b (dictionary): second dictionary of record to value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        cossim: dot product of two dictionaries divided by the norm of the first dictionary and</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">                then by the norm of the second dictionary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testVec1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testVec2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">:</span> <span class="mi">20</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dp</span> <span class="o">=</span> <span class="n">dotprod</span><span class="p">(</span><span class="n">testVec1</span><span class="p">,</span> <span class="n">testVec2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nm</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">testVec1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span> <span class="o">=</span> <span class="n">cossim</span><span class="p">(</span><span class="n">testVec1</span><span class="p">,</span> <span class="n">testVec2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">dp</span><span class="p">,</span> <span class="n">nm</span><span class="p">,</span> <span class="n">cs</span>
<span class="go">102 6.16441400297</span>
</pre></div>
</div>
</div>
<div class="section" id="b-implement-a-cosinesimilarity-function">
<h3><a class="toc-backref" href="#id20">3b) Implement a cosineSimilarity function</a></h3>
<p>Implement a <code class="docutils literal"><span class="pre">cosineSimilarity(string1,</span> <span class="pre">string2,</span> <span class="pre">idfsDictionary)</span></code> function that takes two strings and a dictionary of IDF weights, and computes their cosine similarity in the context of some global IDF weights.</p>
<p>The steps you should perform are:</p>
<ul class="simple">
<li>Apply your <code class="docutils literal"><span class="pre">tfidf</span></code> function to the tokenized first and second strings, using the dictionary of IDF weights</li>
<li>Compute and return your <code class="docutils literal"><span class="pre">cossim</span></code> function applied to the results of the two <code class="docutils literal"><span class="pre">tfidf</span></code> functions</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-3b-implement-a-cosinesimilarity-function">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">cosineSimilarity</span><span class="p">(</span><span class="n">string1</span><span class="p">,</span> <span class="n">string2</span><span class="p">,</span> <span class="n">idfsDictionary</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute cosine similarity between two strings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        string1 (str): first string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        string2 (str): second string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        idfsDictionary (dictionary): a dictionary of IDF values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        cossim: cosine similarity value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">w1</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">(</span><span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">w2</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">(</span><span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">cossim</span><span class="p">(</span><span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cossimAdobe</span> <span class="o">=</span> <span class="n">cosineSimilarity</span><span class="p">(</span><span class="s1">&#39;Adobe Photoshop&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                               <span class="s1">&#39;Adobe Illustrator&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                               <span class="n">idfsSmallWeights</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">cossimAdobe</span>
<span class="go">0.0577243382163</span>
</pre></div>
</div>
</div>
<div class="section" id="c-perform-entity-resolution">
<h3><a class="toc-backref" href="#id21">3c) Perform Entity Resolution</a></h3>
<p>Now we can finally do some <strong>entity resolution</strong>!</p>
<ul>
<li><p class="first">For <strong>every record in the small Google dataset</strong>, use your <code class="docutils literal"><span class="pre">cosineSimilarity</span></code> function to compute its similarity to <strong>every record in the small Amazon dataset</strong>.</p>
</li>
<li><p class="first">Then, build a <code class="docutils literal"><span class="pre">dictionary</span></code> mapping (Google URL, Amazon ID) tuples to similarity scores between 0 and 1.  (<code class="docutils literal"><span class="pre">mydict[googleID,amazonID]-&gt;similarity</span> <span class="pre">score</span></code>)</p>
</li>
<li><p class="first">We&#8217;ll do this computation <strong>two different ways</strong>:</p>
<ul class="simple">
<li>first we&#8217;ll do it <strong>without a broadcast variable</strong>, and</li>
<li>then we&#8217;ll <strong>use a broadcast variable</strong></li>
</ul>
</li>
<li><p class="first">The steps you should perform are:</p>
<ul>
<li><p class="first">Create an RDD that is a combination of the small Google and small Amazon datasets that has as elements all pairs of elements (a, b) where a is in self and b is in other. The result will be an RDD of the form:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[ ((Google URL1, Google String1), (Amazon ID1, Amazon String1)), ((Google URL1, Google String1), (Amazon ID2, Amazon String2)), ((Google URL2, Google String2), (Amazon ID1, Amazon String1)), ... ]
</pre></div>
</div>
</li>
<li><p class="first">Define a worker function that given an element from the combination RDD computes the cosineSimlarity for the two records in the element</p>
</li>
<li><p class="first">Apply the worker function to every element in the RDD</p>
</li>
</ul>
</li>
<li><p class="first">Now, compute the similarity between Amazon record b000o24l3q and Google record <a class="reference external" href="http://www.google.com/base/feeds/snippets/17242822440574356561">http://www.google.com/base/feeds/snippets/17242822440574356561</a>.</p>
</li>
</ul>
<div class="admonition-hint admonition">
<p class="first admonition-title">Hint</p>
<p>Use Spark&#8217;s cartesian method.</p>
<p class="last"><a class="reference external" href="https://wtak23.github.io/pyspark/generated/generated/pyspark.RDD.cartesian.html">https://wtak23.github.io/pyspark/generated/generated/pyspark.RDD.cartesian.html</a></p>
</div>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-3c-perform-entity-resolution">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crossSmall</span> <span class="o">=</span> <span class="p">(</span><span class="n">googleSmall</span>
<span class="gp">&gt;&gt;&gt; </span>              <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>              <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">computeSimilarity</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute similarity on a combination record</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        record: a pair, (google record, amazon record)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        pair: a pair, (google URL, amazon ID, cosine similarity value)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleRec</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonRec</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleURL</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonID</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleValue</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonValue</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">cs</span> <span class="o">=</span> <span class="n">cosineSimilarity</span><span class="p">(</span><span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">idfsSmallWeights</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">googleURL</span><span class="p">,</span> <span class="n">amazonID</span><span class="p">,</span> <span class="n">cs</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similarities</span> <span class="o">=</span> <span class="p">(</span><span class="n">crossSmall</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">similar</span><span class="p">(</span><span class="n">amazonID</span><span class="p">,</span> <span class="n">googleURL</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Return similarity value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        amazonID: amazon ID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        googleURL: google URL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        similar: cosine similarity value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">similarities</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">record</span><span class="p">:</span> <span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">googleURL</span> <span class="ow">and</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">amazonID</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similarityAmazonGoogle</span> <span class="o">=</span> <span class="n">similar</span><span class="p">(</span><span class="s1">&#39;b000o24l3q&#39;</span><span class="p">,</span> <span class="s1">&#39;http://www.google.com/base/feeds/snippets/17242822440574356561&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Requested similarity is </span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">similarityAmazonGoogle</span>
<span class="go">Requested similarity is 0.000303171940451.</span>
</pre></div>
</div>
</div>
<div class="section" id="d-perform-entity-resolution-with-broadcast-variables">
<h3><a class="toc-backref" href="#id22">3d) Perform Entity Resolution with Broadcast Variables</a></h3>
<ul class="simple">
<li>The solution in (3c) works well for <strong>small datasets</strong>, but it requires Spark to (automatically) send the <code class="docutils literal"><span class="pre">idfsSmallWeights</span></code> <strong>variable to all the workers for each record</strong>.</li>
<li>For example, if we only have one worker, and we have 1,000 records, we would be sending idfSmallWeights to the same worker 1,000 times.</li>
<li>Further, if we didn&#8217;t <code class="docutils literal"><span class="pre">cache()</span></code> similarities, then it might have to be recreated if we run <code class="docutils literal"><span class="pre">similar()</span></code> multiple times.</li>
<li>While this approach works fine for small datasets, it becomes a bottleneck for larger datasets.</li>
</ul>
<p>Instead, we can use a <strong>broadcast variable</strong></p>
<ul class="simple">
<li>we define the broadcast variable in the <strong>driver</strong> and then we can refer to it in each <strong>worker</strong>.</li>
<li>Spark saves the broadcast variable at each worker, so <strong>it is only sent once</strong>.</li>
<li>The steps you should perform are:<ul>
<li>Define a <code class="docutils literal"><span class="pre">computeSimilarityBroadcast</span></code> function that given an element from the combination RDD computes the cosine simlarity for the two records in the element.</li>
<li>This will be the same as the worker function <code class="docutils literal"><span class="pre">computeSimilarity</span></code> in (3c) <strong>except that it uses a broadcast variable</strong>.</li>
<li>Apply the worker function to every element in the RDD</li>
</ul>
</li>
<li>Again, compute the similarity between Amazon record b000o24l3q and Google record <code class="docutils literal"><span class="pre">http://www.google.com/base/feeds/snippets/17242822440574356561</span></code>.</li>
</ul>
<p><a class="reference external" href="http://spark.apache.org/docs/latest/programming-guide.html#broadcast-variables">http://spark.apache.org/docs/latest/programming-guide.html#broadcast-variables</a></p>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-3d-perform-entity-resolution-with-broadcast-variables">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">computeSimilarityBroadcast</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute similarity on a combination record, using Broadcast variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        record: a pair, (google record, amazon record)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        pair: a pair, (google URL, amazon ID, cosine similarity value)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleRec</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonRec</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleURL</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonID</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleValue</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonValue</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">cs</span> <span class="o">=</span> <span class="n">cosineSimilarity</span><span class="p">(</span><span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">idfsSmallBroadcast</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">googleURL</span><span class="p">,</span> <span class="n">amazonID</span><span class="p">,</span> <span class="n">cs</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsSmallBroadcast</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">idfsSmallWeights</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similaritiesBroadcast</span> <span class="o">=</span> <span class="p">(</span><span class="n">crossSmall</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">similarBroadcast</span><span class="p">(</span><span class="n">amazonID</span><span class="p">,</span> <span class="n">googleURL</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Return similarity value, computed using Broadcast variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        amazonID: amazon ID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        googleURL: google URL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        similar: cosine similarity value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">similaritiesBroadcast</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">record</span><span class="p">:</span> <span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">googleURL</span> <span class="ow">and</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">amazonID</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similarityAmazonGoogleBroadcast</span> <span class="o">=</span> <span class="n">similarBroadcast</span><span class="p">(</span><span class="s1">&#39;b000o24l3q&#39;</span><span class="p">,</span> <span class="s1">&#39;http://www.google.com/base/feeds/snippets/17242822440574356561&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Requested similarity is </span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">similarityAmazonGoogleBroadcast</span>
<span class="go">Requested similarity is 0.000303171940451.</span>
</pre></div>
</div>
</div>
<div class="section" id="e-perform-a-gold-standard-evaluation">
<h3><a class="toc-backref" href="#id23">3e) Perform a Gold Standard evaluation</a></h3>
<ul class="simple">
<li>First, we&#8217;ll load the &#8220;<strong>gold standard</strong>&#8221; data and use it to answer several questions.</li>
<li>We read and parse the Gold Standard data, where the format of each line is &#8220;Amazon Product ID&#8221;,&#8221;Google URL&#8221;.</li>
<li>The resulting RDD has elements of the form: <code class="docutils literal"><span class="pre">(&quot;AmazonID</span> <span class="pre">GoogleURL&quot;,</span> <span class="pre">'gold')</span></code></li>
<li>Run the following cell to create the <code class="docutils literal"><span class="pre">parse_goldfile_line()</span></code> function that we&#8217;ll use to parse the data.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GOLDFILE_PATTERN</span> <span class="o">=</span> <span class="s1">&#39;^(.+),(.+)&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Parse each line of a data file useing the specified regular expression pattern</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse_goldfile_line</span><span class="p">(</span><span class="n">goldfile_line</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Parse a line from the &#39;golden standard&#39; data file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        goldfile_line: a line of data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        pair: ((key, &#39;gold&#39;, 1 if successful or else 0))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">GOLDFILE_PATTERN</span><span class="p">,</span> <span class="n">goldfile_line</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">print</span> <span class="s1">&#39;Invalid goldfile line: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">goldfile_line</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="p">(</span><span class="n">goldfile_line</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">elif</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;&quot;idAmazon&quot;&#39;</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">print</span> <span class="s1">&#39;Header datafile line: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">goldfile_line</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="p">(</span><span class="n">goldfile_line</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">removeQuotes</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="n">removeQuotes</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="s1">&#39;gold&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">goldfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">GOLD_STANDARD_PATH</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsRaw</span> <span class="o">=</span> <span class="p">(</span><span class="n">sc</span>
<span class="gp">&gt;&gt;&gt; </span>         <span class="o">.</span><span class="n">textFile</span><span class="p">(</span><span class="n">goldfile</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>         <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">parse_goldfile_line</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>         <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsFailed</span> <span class="o">=</span> <span class="p">(</span><span class="n">gsRaw</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">gsFailed</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="s1">&#39;Invalid goldfile line: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">line</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">goldStandard</span> <span class="o">=</span> <span class="p">(</span><span class="n">gsRaw</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Read </span><span class="si">%d</span><span class="s1"> lines, successfully parsed </span><span class="si">%d</span><span class="s1"> lines, failed to parse </span><span class="si">%d</span><span class="s1"> lines&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gsRaw</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span>
<span class="gp">&gt;&gt;&gt; </span>                                                                                 <span class="n">goldStandard</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span>
<span class="gp">&gt;&gt;&gt; </span>                                                                                 <span class="n">gsFailed</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">gsFailed</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">gsRaw</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="n">goldStandard</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">Read 1301 lines, successfully parsed 1300 lines, failed to parse 0 lines</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-gold-standard-data-we-can-answer-the-following-questions">
<h3><a class="toc-backref" href="#id24">Using the &#8220;gold standard&#8221; data we can answer the following questions</a></h3>
<ol class="arabic simple">
<li>How many true duplicate pairs are there in the small datasets?</li>
<li>What is the average similarity score for true duplicates?</li>
<li>What about for non-duplicates? The steps you should perform are:</li>
<li>Create a new <code class="docutils literal"><span class="pre">sims</span></code> RDD from the <code class="docutils literal"><span class="pre">similaritiesBroadcast</span></code> RDD, where each element consists of a pair of the form <code class="docutils literal"><span class="pre">(&quot;AmazonID</span> <span class="pre">GoogleURL&quot;,</span> <span class="pre">cosineSimilarityScore)</span></code>.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>An example entry from sims is: <code class="docutils literal"><span class="pre">('b000bi7uqs</span> <span class="pre">http://www.google.com/base/feeds/snippets/18403148885652932189',</span> <span class="pre">0.40202896125621296)</span></code></li>
</ul>
</div></blockquote>
<ol class="arabic simple">
<li>Combine the <code class="docutils literal"><span class="pre">sims</span></code> RDD with the goldStandard RDD by creating a new <code class="docutils literal"><span class="pre">trueDupsRDD</span></code> RDD that has just the cosine similarity scores for those &#8220;AmazonID GoogleURL&#8221; pairs that appear in both the <code class="docutils literal"><span class="pre">sims</span></code> RDD and goldStandard RDD.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Hint: you can do this using the <code class="docutils literal"><span class="pre">join()</span></code> transformation.</li>
</ul>
</div></blockquote>
<ol class="arabic simple">
<li>Count the number of true duplicate pairs in the <code class="docutils literal"><span class="pre">trueDupsRDD</span></code> dataset</li>
<li>Compute the average similarity score for true duplicates in the <code class="docutils literal"><span class="pre">trueDupsRDD</span></code> datasets. Remember to use <code class="docutils literal"><span class="pre">float</span></code> for calculation</li>
<li>Create a new <code class="docutils literal"><span class="pre">nonDupsRDD</span></code> RDD that has just the cosine similarity scores for those &#8220;AmazonID GoogleURL&#8221; pairs from the <code class="docutils literal"><span class="pre">similaritiesBroadcast</span></code> RDD that do not appear in both the <code class="docutils literal"><span class="pre">sims</span></code> RDD and <code class="docutils literal"><span class="pre">goldStandard</span></code> RDD.</li>
<li>Compute the average similarity score for non-duplicates in the last datasets. Remember to use <code class="docutils literal"><span class="pre">float</span></code> for calculation</li>
</ol>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#using-the-gold-standard-data-we-can-answer-the-following-questions">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sims</span> <span class="o">=</span> <span class="n">similaritiesBroadcast</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trueDupsRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">sims</span>
<span class="gp">&gt;&gt;&gt; </span>               <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trueDupsCount</span> <span class="o">=</span> <span class="n">trueDupsRDD</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">avgSimDups</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonDupsRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">sims</span>
<span class="gp">&gt;&gt;&gt; </span>              <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">avgSimNon</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> true duplicates.&#39;</span> <span class="o">%</span> <span class="n">trueDupsCount</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;The average similarity of true duplicates is </span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">avgSimDups</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;And for non duplicates, it is </span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">avgSimNon</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="part-4-scalable-er">
<h2><a class="toc-backref" href="#id25">Part 4: Scalable ER</a></h2>
<ul class="simple">
<li>In the previous parts, we built a text similarity function and used it for small scale entity resolution.</li>
<li>Our implementation is limited by its <strong>quadratic run time complexity</strong><ul>
<li>this is not practical for even modestly sized datasets.</li>
</ul>
</li>
</ul>
<div class="admonition-section-overview admonition">
<p class="first admonition-title">Section Overview</p>
<p>In this part, we will implement a more scalable algorithm and use it to do entity resolution on the <strong>full dataset</strong>.</p>
<p class="last">For this section, we&#8217;ll use the <strong>complete Google and Amazon datasets</strong>, not the <em>samples</em></p>
</div>
<div class="section" id="inverted-indices">
<h3><a class="toc-backref" href="#id26">Inverted Indices</a></h3>
<ul class="simple">
<li>To improve our ER algorithm, we begin by analyzing its running time.</li>
<li>the algorithm above is <strong>quadratic</strong> in <strong>two ways</strong>.<ul>
<li>First, we did a lot of <strong>redundant computation of tokens and weights</strong>, since each record was reprocessed every time it was compared.</li>
<li>Second, we made quadratically many token comparisons between records.</li>
</ul>
</li>
<li>The <strong>first source of quadratic overhead</strong> can be eliminated with <strong>precomputation and look-up tables</strong></li>
<li>The <strong>second source of quadratic overhead</strong> is a little more tricky.</li>
<li>In the <strong>worst case</strong>, every token in every record in one dataset exists in every record in the other dataset<ul>
<li>therefore every token makes a non-zero contribution to the cosine similarity.</li>
<li>In this case, token comparison is unavoidably quadratic.</li>
</ul>
</li>
<li>But <strong>in reality</strong> most records have nothing (or very little) in common.</li>
<li>Moreover, it is typical for a record in one dataset to have at most one duplicate record in the other dataset (this is the case assuming each dataset has been de-duplicated against itself).</li>
<li>In this case, the output is <strong>linear</strong> in the size of the input and we can hope to achieve <strong>linear running time</strong>.</li>
<li>We&#8217;ll turn to <strong>inverted index</strong> data structure for this!</li>
</ul>
<div class="admonition-inverted-index-overview admonition">
<p class="first admonition-title">Inverted Index &#8212; Overview</p>
<ul class="last simple">
<li>An <strong>inverted index</strong> is a data structure that will allow us to avoid making quadratically many token comparisons.</li>
<li>It maps each token in the dataset to the list of documents that contain the token.</li>
<li>So, <span class="emph">instead of comparing</span>, record by record, each token to every other token to see if they match, we will use <strong>inverted indices</strong> to <span class="emph">look up records that match on a particular token</span>.</li>
</ul>
</div>
<div class="admonition-note-on-terminology admonition">
<p class="first admonition-title">Note on terminology</p>
<ul class="last simple">
<li>In text search, a <strong>forward index</strong> maps documents in a dataset to the tokens they contain.</li>
<li>An <strong>inverted index</strong> supports the inverse mapping.</li>
</ul>
</div>
</div>
<div class="section" id="a-tokenize-the-full-dataset">
<h3><a class="toc-backref" href="#id27">4a) Tokenize the full dataset</a></h3>
<p>Tokenize each of the two full datasets for Google and Amazon. Use the <code class="docutils literal"><span class="pre">tokenize()</span></code> function we defined in (1b).</p>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-4a-tokenize-the-full-dataset">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonFullRecToToken</span> <span class="o">=</span> <span class="n">amazon</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleFullRecToToken</span> <span class="o">=</span> <span class="n">google</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Amazon full dataset is </span><span class="si">%s</span><span class="s1"> products, Google full dataset is </span><span class="si">%s</span><span class="s1"> products&#39;</span> \
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">%</span> <span class="p">(</span><span class="n">amazonFullRecToToken</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span><span class="n">googleFullRecToToken</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="go">Amazon full dataset is 1363 products, Google full dataset is 3226 products</span>
</pre></div>
</div>
</div>
<div class="section" id="b-compute-idfs-and-tf-idfs-for-the-full-datasets">
<h3><a class="toc-backref" href="#id28">4b) Compute IDFs and TF-IDFs for the full datasets</a></h3>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-4b-compute-idfs-and-tf-idfs-for-the-full-datasets">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fullCorpusRDD</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsFull</span> <span class="o">=</span> <span class="n">idfs</span><span class="p">(</span><span class="n">fullCorpusRDD</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsFullCount</span> <span class="o">=</span> <span class="n">idfsFull</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> unique tokens in the full datasets.&#39;</span> <span class="o">%</span> <span class="n">idfsFullCount</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Convert to dict and then broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsFullWeights</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idfsFullBroadcast</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Pre-compute TF-IDF weights.  Build mappings from record ID weight vector.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonWeightsRDD</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleWeightsRDD</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> Amazon weights and </span><span class="si">%s</span><span class="s1"> Google weights.&#39;</span> \
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">%</span> <span class="p">(</span><span class="n">amazonWeightsRDD</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span> <span class="n">googleWeightsRDD</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="go">There are 17078 unique tokens in the full datasets.</span>
<span class="go">There are 1363 Amazon weights and 3226 Google weights.</span>
</pre></div>
</div>
</div>
<div class="section" id="c-compute-norms-for-the-weights-from-the-full-datasets">
<h3><a class="toc-backref" href="#id29">4c) Compute Norms for the weights from the full datasets</a></h3>
<ul class="simple">
<li>Reuse the code from above to <strong>compute norms of the IDF weights for the complete combined dataset</strong>.</li>
<li>The steps you should perform are:<ul>
<li>Create two collections, one for each of the full Amazon and Google datasets,
where IDs/URLs map to the norm of the associated TF-IDF weighted token vectors.</li>
<li>Convert each collection into a broadcast variable, containing a dictionary
of the norm of IDF weights for the full dataset</li>
</ul>
</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-4c-compute-norms-for-the-weights-from-the-full-datasets">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amazonNorms</span> <span class="o">=</span> <span class="n">amazonWeightsRDD</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonNormsBroadcast</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleNorms</span> <span class="o">=</span> <span class="n">googleWeightsRDD</span><span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleNormsBroadcast</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> Amazon norms and </span><span class="si">%s</span><span class="s1"> Google norms.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">amazonNorms</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">googleNorms</span><span class="p">))</span>
<span class="go">There are 1363 Amazon norms and 3226 Google norms.</span>
</pre></div>
</div>
</div>
<div class="section" id="d-create-inverted-indices-from-the-full-datasets">
<h3><a class="toc-backref" href="#id30">4d) Create inverted indices from the full datasets</a></h3>
<p>Build inverted indices of both data sources.</p>
<p>The steps you should perform are:</p>
<ul class="simple">
<li>Create an <strong>invert function</strong>:<ul>
<li><strong>input</strong>: a pair of (ID/URL, TF-IDF weighted token vector),</li>
<li><strong>output</strong>: a list of pairs of (token, ID/URL).</li>
<li>Recall that the TF-IDF weighted token vector is a dictionary with keys that are tokens and values that are weights.</li>
</ul>
</li>
<li>Use your <strong>invert function</strong> to convert the full Amazon and Google TF-IDF weighted token vector datasets
into <strong>two RDDs</strong> where each element is* a pair of a token and an ID/URL that contain that token*.<ul>
<li><span class="emph">These are inverted indices</span></li>
</ul>
</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-4d-create-inverted-indices-from-the-full-datasets">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Invert (ID, tokens) to a list of (token, ID)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        record: a pair, (ID, token vector)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        pairs: a list of pairs of token to ID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">pairs</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonInvPairsRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">amazonWeightsRDD</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleInvPairsRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">googleWeightsRDD</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> Amazon inverted pairs and </span><span class="si">%s</span><span class="s1"> Google inverted pairs.&#39;</span> \
<span class="gp">&gt;&gt;&gt; </span>  <span class="o">%</span> <span class="p">(</span><span class="n">amazonInvPairsRDD</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span><span class="n">googleInvPairsRDD</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="go">There are 111387 Amazon inverted pairs and 77678 Google inverted pairs.</span>
</pre></div>
</div>
</div>
<div class="section" id="e-identify-common-tokens-from-the-full-dataset">
<h3><a class="toc-backref" href="#id31">4e) Identify common tokens from the full dataset</a></h3>
<p>We are now in position to efficiently perform ER on the full datasets.</p>
<p>Implement the following algorithm to <strong>build an RDD</strong> that <em>maps a pair of (ID, URL) to a list of tokens they share in common</em>:</p>
<ul class="simple">
<li><strong>create a new RDD</strong> <code class="docutils literal"><span class="pre">commonTokens</span></code> that contains only tokens that appear in both datasets<ul>
<li>This will yield an RDD of pairs of <strong>(token, (ID, URL))</strong>.</li>
<li>for this, use the two inverted indices (RDDs where each element is a pair of a token and an ID or URL that contains that token).</li>
</ul>
</li>
<li>We need a mapping from (ID, URL) to token, so <strong>create a function</strong> <code class="docutils literal"><span class="pre">swap</span></code> that will swap the elements of the RDD you just created to create this new RDD consisting of ((ID, URL), token) pairs.</li>
<li>Finally, <strong>create an RDD</strong> consisting of pairs mapping (ID, URL) to all the tokens the pair shares in common</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-4e-identify-common-tokens-from-the-full-dataset">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Swap (token, (ID, URL)) to ((ID, URL), token)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        record: a pair, (token, (ID, URL))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        pair: ((ID, URL), token)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">token</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">keys</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">commonTokens</span> <span class="o">=</span> <span class="p">(</span><span class="n">amazonInvPairsRDD</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;Found </span><span class="si">%d</span><span class="s1"> common tokens&#39;</span> <span class="o">%</span> <span class="n">commonTokens</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">(1) Spark Jobs</span>
<span class="go">Found 2441100 common tokens</span>
<span class="go">Command took 30.38s</span>
</pre></div>
</div>
</div>
<div class="section" id="f-identify-common-tokens-from-the-full-dataset">
<h3><a class="toc-backref" href="#id32">4f) Identify common tokens from the full dataset</a></h3>
<p>Use the data structures from parts (4a) and (4e) to <strong>build a dictionary</strong> to map <em>record pairs</em> to <em>cosine similarity scores</em>.</p>
<p>The steps you should perform are:</p>
<ul class="simple">
<li>Create <strong>two broadcast dictionaries</strong> from the amazonWeights and googleWeights RDDs</li>
<li>Create a <code class="docutils literal"><span class="pre">fastCosinesSimilarity</span></code> function<ul>
<li><strong>input</strong>: a record consisting of the pair ((Amazon ID, Google URL), tokens list)</li>
<li>computes the sum for each of the tokens in the token list of the products of the Amazon weight for the token times the Google weight for the token.</li>
<li>The sum should then be divided by the norm for the Google URL and then divided by the norm for the Amazon ID.</li>
<li><strong>output</strong>: the function should return this value in a pair with the key being the (Amazon ID, Google URL).</li>
</ul>
</li>
<li><span class="emph">Make sure you use broadcast variables</span> you created for both the weights and norms</li>
<li>Apply your <code class="docutils literal"><span class="pre">fastCosinesSimilarity</span></code> function to the common tokens from the full dataset</li>
</ul>
<p>(<a class="reference external" href="https://github.com/wtak23/private_repos/blob/master/cs110_lab3b_solutions.rst#exercise-4f-identify-common-tokens-from-the-full-dataset">sol</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># TODO: Replace &lt;FILL IN&gt; with appropriate code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amazonWeightsBroadcast</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">googleWeightsBroadcast</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fastCosineSimilarity</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="sd">&quot;&quot;&quot; Compute Cosine Similarity using Broadcast variables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Args:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        record: ((ID, URL), iterable(token))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    Returns:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">        pair: ((ID, URL), cosine similarity value)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">amazonRec</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">googleRec</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tokens</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">s</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">value</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">amazonRec</span><span class="p">,</span> <span class="n">googleRec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similaritiesFullRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonTokens</span>
<span class="gp">&gt;&gt;&gt; </span>                       <span class="o">.&lt;</span><span class="n">FILL</span> <span class="n">IN</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>                       <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">similaritiesFullRDD</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">(3) Spark Jobs</span>
<span class="go">2441100</span>
<span class="go">Command took 6.98s</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="part-5-analysis">
<h2><a class="toc-backref" href="#id33">Part 5: Analysis</a></h2>
<div class="math">
\[Fmeasure = 2 \cdot \frac{precision * recall}{precision + recall}\]</div>
<p>Now we have an authoritative list of <strong>record-pair similarities</strong>, but <span class="emph">we need a way to use those similarities to decide if two records are duplicates or not</span>.</p>
<ul class="simple">
<li>The simplest approach is to pick a <strong>threshold</strong>. Pairs whose similarity is <strong>above the threshold are declared duplicates</strong>, and pairs below the threshold are declared distinct.</li>
<li>Higher threshold -&gt; more <strong>False positives</strong> (we deem a record-pair to be duplicates when it&#8217;s not)</li>
<li>Lower threshold -&gt; more <strong>False negatives</strong> (record-pairs that are duplicates that we miss)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>In this part, we use the &#8220;<strong>gold standard</strong>&#8221; mapping from the included file to look up true duplicates, and the results of Part 4.</li>
</ul>
</div>
<div class="section" id="a-counting-true-positives-false-positives-and-false-negatives">
<h3><a class="toc-backref" href="#id34">5a) Counting True Positives, False Positives, and False Negatives</a></h3>
<p>Create functions that count <strong>True Positives</strong> (true duplicates above the threshold), FP, FN.</p>
<ul class="simple">
<li>We start with creating the <code class="docutils literal"><span class="pre">simsFullRDD</span></code> from our <code class="docutils literal"><span class="pre">similaritiesFullRDD</span></code> that consists of a pair of ((Amazon ID, Google URL), simlarity score)</li>
<li>From this RDD, we create an RDD consisting of only the similarity scores</li>
<li>To look up the similarity scores for true duplicates, we perform a <strong>left outer join</strong> using the <strong>goldStandard RDD</strong> and <code class="docutils literal"><span class="pre">simsFullRDD</span></code> and extract the similarities scores using the helper function</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create an RDD of ((Amazon ID, Google URL), similarity score)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simsFullRDD</span> <span class="o">=</span> <span class="n">similaritiesFullRDD</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create an RDD of just the similarity scores</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simsFullValuesRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">simsFullRDD</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Look up all similarity scores for true duplicates</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># This helper function will return the similarity score for records that are in the gold standard and the simsFullRDD (True positives), and will return 0 for records that are in the gold standard but not in simsFullRDD (False Negatives).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">gs_value</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Join the gold standard and simsFullRDD, and then extract the similarities scores using the helper function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trueDupSimsRDD</span> <span class="o">=</span> <span class="p">(</span><span class="n">goldStandard</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="o">.</span><span class="n">leftOuterJoin</span><span class="p">(</span><span class="n">simsFullRDD</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">gs_value</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="o">.</span><span class="n">cache</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s1">&#39;There are </span><span class="si">%s</span><span class="s1"> true duplicates.&#39;</span> <span class="o">%</span> <span class="n">trueDupSimsRDD</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">There are 1300 true duplicates.</span>
<span class="go">Command took 16.12s</span>
</pre></div>
</div>
<p>The next step is to <strong>pick a threshold</strong> between 0 and 1 for the count of True Positives. We would like to explore many different thresholds. To do this, we divide the <strong>space of thresholds into 100 bins</strong>, and take the following actions:</p>
<ul class="simple">
<li>We use <span class="emph">Spark Accumulators</span> to implement our counting function.<ul>
<li>We define a custom accumulator type, <code class="docutils literal"><span class="pre">VectorAccumulatorParam</span></code>, along with functions to initialize the accumulator&#8217;s vector to zero, and to add two vectors.</li>
<li>Note that we have to use the <code class="docutils literal"><span class="pre">+=</span></code> operator because you can only add to an accumulator.</li>
</ul>
</li>
<li>We create a helper function to create a list with one entry (bit) set to a value and all others set to 0.</li>
<li>We create 101 bins for the 100 threshold values between 0 and 1.</li>
<li>Now, for each similarity score, we can compute the false positives. We do this by adding each similarity score to the appropriate bin of the vector. Then we remove true positives from the vector by using the gold standard data.</li>
<li>We define functions for computing false positive and negative and true positives, for a given threshold.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyspark.accumulators</span> <span class="kn">import</span> <span class="n">AccumulatorParam</span>
<span class="k">class</span> <span class="nc">VectorAccumulatorParam</span><span class="p">(</span><span class="n">AccumulatorParam</span><span class="p">):</span>
    <span class="c1"># Initialize the VectorAccumulator to 0</span>
    <span class="k">def</span> <span class="nf">zero</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="c1"># Add two VectorAccumulator variables</span>
    <span class="k">def</span> <span class="nf">addInPlace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">val1</span><span class="p">)):</span>
            <span class="n">val1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">val1</span>

<span class="c1"># Return a list with entry x set to value and all other entries set to 0</span>
<span class="k">def</span> <span class="nf">set_bit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">):</span>
          <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bits</span>

<span class="c1"># Pre-bin counts of false positives for different threshold ranges</span>
<span class="n">BINS</span> <span class="o">=</span> <span class="mi">101</span>
<span class="n">nthresholds</span> <span class="o">=</span> <span class="mi">100</span>
<span class="k">def</span> <span class="nf">bin</span><span class="p">(</span><span class="n">similarity</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">similarity</span> <span class="o">*</span> <span class="n">nthresholds</span><span class="p">)</span>

<span class="c1"># fpCounts[i] = number of entries (possible false positives) where bin(similarity) == i</span>
<span class="n">zeros</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">BINS</span>
<span class="n">fpCounts</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">accumulator</span><span class="p">(</span><span class="n">zeros</span><span class="p">,</span> <span class="n">VectorAccumulatorParam</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">add_element</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">fpCounts</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
    <span class="n">fpCounts</span> <span class="o">+=</span> <span class="n">set_bit</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BINS</span><span class="p">)</span>

<span class="n">simsFullValuesRDD</span><span class="o">.</span><span class="n">foreach</span><span class="p">(</span><span class="n">add_element</span><span class="p">)</span>

<span class="c1"># Remove true positives from FP counts</span>
<span class="k">def</span> <span class="nf">sub_element</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">fpCounts</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
    <span class="n">fpCounts</span> <span class="o">+=</span> <span class="n">set_bit</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">BINS</span><span class="p">)</span>

<span class="n">trueDupSimsRDD</span><span class="o">.</span><span class="n">foreach</span><span class="p">(</span><span class="n">sub_element</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">falsepos</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
    <span class="n">fpList</span> <span class="o">=</span> <span class="n">fpCounts</span><span class="o">.</span><span class="n">value</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="n">fpList</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">BINS</span><span class="p">)</span> <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="n">nthresholds</span> <span class="o">&gt;=</span> <span class="n">threshold</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">falseneg</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">trueDupSimsRDD</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">truepos</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">trueDupSimsRDD</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">-</span> <span class="n">falsenegDict</span><span class="p">[</span><span class="n">threshold</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="b-precision-recall-and-f-measures">
<h3><a class="toc-backref" href="#id35">5b Precision, Recall, and F-measures</a></h3>
<p>Define functions so that we can compute the Precision, Recall, and F-measure as a function of threshold value:</p>
<ul class="simple">
<li>Precision = true-positives / (true-positives + false-positives)</li>
<li>Recall = true-positives / (true-positives + false-negatives)</li>
<li>F-measure = 2 x Recall x Precision / (Recall + Precision)</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Precision = true-positives / (true-positives + false-positives)</span>
<span class="c1"># Recall = true-positives / (true-positives + false-negatives)</span>
<span class="c1"># F-measure = 2 x Recall x Precision / (Recall + Precision)</span>

<span class="k">def</span> <span class="nf">precision</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
    <span class="n">tp</span> <span class="o">=</span> <span class="n">trueposDict</span><span class="p">[</span><span class="n">threshold</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">tp</span> <span class="o">+</span> <span class="n">falseposDict</span><span class="p">[</span><span class="n">threshold</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">recall</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
    <span class="n">tp</span> <span class="o">=</span> <span class="n">trueposDict</span><span class="p">[</span><span class="n">threshold</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">tp</span> <span class="o">+</span> <span class="n">falsenegDict</span><span class="p">[</span><span class="n">threshold</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">fmeasure</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">recall</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">precision</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">r</span> <span class="o">*</span> <span class="n">p</span> <span class="o">/</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="c-line-plots">
<h3><a class="toc-backref" href="#id36">5c Line Plots</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">thresholds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">nthresholds</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nthresholds</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">falseposDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">t</span><span class="p">,</span> <span class="n">falsepos</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">falsenegDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">t</span><span class="p">,</span> <span class="n">falseneg</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trueposDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">t</span><span class="p">,</span> <span class="n">truepos</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precisions</span> <span class="o">=</span> <span class="p">[</span><span class="n">precision</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recalls</span> <span class="o">=</span> <span class="p">[</span><span class="n">recall</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fmeasures</span> <span class="o">=</span> <span class="p">[</span><span class="n">fmeasure</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">precisions</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fmeasures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(200) Spark Jobs</span>
<span class="go">0.000532546802671 0.00106452669505</span>
<span class="go">Command took 23.93s</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">thresholds</span><span class="p">,</span> <span class="n">precisions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">thresholds</span><span class="p">,</span> <span class="n">recalls</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">thresholds</span><span class="p">,</span> <span class="n">fmeasures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Precision&#39;</span><span class="p">,</span> <span class="s1">&#39;Recall&#39;</span><span class="p">,</span> <span class="s1">&#39;F-measure&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/cs110_lab3b_5c.png"><img alt="../_images/cs110_lab3b_5c.png" class="align-center" src="../_images/cs110_lab3b_5c.png" style="width: 800.0px; height: 600.0px;" /></a>
<p>Also use Databrick&#8217;s <code class="docutils literal"><span class="pre">display</span></code> function to create a similar plot.</p>
<a class="reference internal image-reference" href="http://spark-mooc.github.io/web-assets/images/cs110x/lab3-change-plot-5c.png"><img alt="http://spark-mooc.github.io/web-assets/images/cs110x/lab3-change-plot-5c.png" class="align-center" src="http://spark-mooc.github.io/web-assets/images/cs110x/lab3-change-plot-5c.png" /></a>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Create a DataFrame and visualize using display()</span>
<span class="n">graph</span> <span class="o">=</span> <span class="p">[(</span><span class="n">t</span><span class="p">,</span> <span class="n">precision</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">recall</span><span class="p">(</span><span class="n">t</span><span class="p">),</span><span class="n">fmeasure</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">]</span>
<span class="n">graphRDD</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="n">graphRow</span> <span class="o">=</span> <span class="n">graphRDD</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="n">Row</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">recall</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">fmeasure</span><span class="o">=</span><span class="n">z</span><span class="p">))</span>
<span class="n">graphDF</span> <span class="o">=</span> <span class="n">sqlContext</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">graphRow</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">graphDF</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/cs110_lab3b_5c2.png"><img alt="../_images/cs110_lab3b_5c2.png" class="align-center" src="../_images/cs110_lab3b_5c2.png" style="width: 827.0px; height: 389.0px;" /></a>
</div>
</div>
<div class="section" id="discussion-of-results">
<h2><a class="toc-backref" href="#id37">Discussion of results</a></h2>
<ul class="simple">
<li>State-of-the-art tools can get an <strong>F-measure of about 60%</strong> on this dataset.</li>
<li>In this lab exercise, our best <strong>F-measure is closer to 40%</strong>.</li>
<li>Look at some examples of errors (both False Positives and False Negatives) and think about what went wrong.</li>
<li>There are several ways we might improve our simple classifier, including:<ul>
<li>Using additional attributes</li>
<li>Performing better featurization of our textual data (e.g., stemming, n-grams, etc.)</li>
<li>Using different similarity functions</li>
</ul>
</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/pyspark/cs110_lab3b.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
      Last updated on Nov 05, 2016.<br/>
    </p>
  </div>
</footer>
  </body>
</html>